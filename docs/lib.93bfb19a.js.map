{"version":3,"sources":["lib/dev.ts","lib/Core/Math/Matrix.ts","lib/Core/Event/EventListener.ts","lib/Core/Math/Vector.ts","lib/Core/Shape/Shape.ts","lib/Core/Shape/Point.ts","lib/Core/Behaviour/RotatableBehaviour.ts","lib/Core/Shape/Line.ts","lib/Core/Shape/Polygon.ts","lib/Strategy/FreePolygonStrategy.ts","lib/Strategy/LockedScalingStrategy.ts","lib/Strategy/UnlockedScalingStrategy.ts","lib/OverlayEditor.ts","lib/Subject/ImageSubject.ts","lib/index.ts"],"names":[],"mappings":";AAAA,IAAM,EAAS,SAAS,cAAc,OACtC,EAAO,MAAM,SAAW,QACxB,EAAO,MAAM,IAAM,IACnB,EAAO,MAAM,KAAO,IACpB,EAAO,UAAY,MACnB,EAAO,UAAP,0oBA4BA,SAAS,KAAK,QAAQ,GAEtB,IAAM,EAAQ,EAAO,cAAc,QAC7B,EAAS,EAAO,cAAc,SAC9B,EAAa,EAAO,cAAc,aACxC,EAAO,YAAc,iBACrB,EAAW,YAAc,QAEzB,IAAI,EAAe,EACf,EAAa,EACjB,SAAS,IACC,IAAA,EAAO,KAAK,MAEd,GADJ,IACI,EAAO,EAAe,IAAM,CACxB,IAAA,EAAM,KAAK,MAAsB,IAAb,GAAwB,EAAO,IACvD,EAAe,EACf,EAAa,EAEb,EAAM,YAAc,OAAO,GAG/B,sBAAsB,GAI1B;;AC7Be,aAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,MAAA,QAAA,OAAA,QAAA,UAAA,QAAA,cAAA,EAzBR,IAAM,EAAW,WACnB,MAAA,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,IAwB3B,QAAA,SAAA,EArBR,IAAM,EAAY,SAAC,EAAY,EAAY,GACxC,OAAA,EAAA,EAAA,GAAA,GAAO,CAAE,GAAA,EAAI,GAAA,KAoBR,QAAA,UAAA,EAjBR,IAAM,EAAS,SAAC,EAAY,GACzB,OAAA,EAAA,EAAA,GAAA,GAAO,CAAE,EAAG,KAAK,IAAI,GAAU,GAAI,KAAK,IAAI,GAAU,EAAG,KAAK,IAAI,GAAU,EAAG,KAAK,IAAI,MAgBnF,QAAA,OAAA,EAbR,IAAM,EAAQ,SAAC,EAAY,GACxB,OAAA,EAAA,EAAA,GAAA,GAAO,CAAE,EAAG,EAAG,GAAK,EAAQ,EAAG,EAAG,GAAK,EAAQ,EAAG,EAAG,GAAK,EAAQ,EAAG,EAAG,GAAK,KAYxE,QAAA,MAAA,EARf,IAAM,EAAS,CACX,SAAA,EACA,UAAA,EACA,OAAA,EACA,MAAA,GAIW,EAAA,EAAA,QAAA,QAAA;;ACUf,aAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EApCA,IAAY,EAoCZ,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,eAAA,EAAA,QAAA,UAAA,EApCA,SAAY,GACR,EAAA,WAAA,YACA,EAAA,WAAA,YACA,EAAA,SAAA,UAHJ,CAAY,IAAA,QAAA,UAAA,EAAS,KAOf,IAAA,EAAA,WAKU,SAAA,EAAA,EAAe,GAAkB,EAAA,KAAA,GAF5B,KAAA,SAAW,IAAI,IAGvB,KAAA,OAAS,EACT,KAAA,UAAY,EAsBzB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,YAnBqB,MAAA,SAAA,GAGN,OAFP,EAAO,iBAAiB,KAAK,OAAQ,KAAK,WACrC,KAAA,SAAS,IAAI,GACX,OAgBf,CAAA,IAAA,UAbkB,MAAA,WACW,IADX,EACW,EAAA,EAAA,KAAK,UADhB,IAC0B,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,EAAA,MACzB,oBAAoB,KAAK,OAAQ,KAAK,YAFvC,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,SAalB,EA7BM,GAyBS,EAAA,EAIf,QAAA,QAAA;;ACuDe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,GAAA,QAAA,UAAA,QAAA,SAAA,QAAA,OAAA,QAAA,UAAA,QAAA,MAAA,QAAA,IAAA,QAAA,QAAA,QAAA,OAAA,QAAA,OAAA,QAAA,SAAA,QAAA,SAAA,QAAA,IAAA,QAAA,YAAA,EAvFR,IAAM,EAAS,SAAC,GAClB,MAAA,CAAE,EAAG,EAAG,EADiC,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,IAuF/B,QAAA,OAAA,EAnFR,IAAM,EAAM,SAAC,EAAY,GAC3B,MAAA,CAAE,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAI,EAAG,IAkFrB,QAAA,IAAA,EA/ER,IAAM,EAAW,SAAC,EAAY,GAChC,MAAA,CAAE,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAI,EAAG,IA8ErB,QAAA,SAAA,EA3ER,IAAM,EAAW,SAAC,EAAY,GAChC,MAAA,CAAE,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAI,EAAG,IA0ErB,QAAA,SAAA,EAvER,IAAM,EAAS,SAAC,EAAY,GAC9B,MAAA,CAAE,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAI,EAAG,IAsErB,QAAA,OAAA,EAnER,IAAM,EAAS,SAAC,EAAY,EAAY,GACrC,IAAA,EAAM,EAAG,EAAI,EAAG,EAClB,EAAO,EAAG,EAAI,EAAG,EACd,MAAA,CACH,EAAI,KAAK,IAAI,GAAU,EAAQ,KAAK,IAAI,GAAU,EAAQ,EAAG,EAC7D,EAAI,KAAK,IAAI,GAAU,EAAS,KAAK,IAAI,GAAU,EAAO,EAAG,IA8DtD,QAAA,OAAA,EAzDR,IAAM,EAAU,SAAC,EAAY,GACzB,MAAA,CACH,EAAI,EAAG,EAAI,KAAK,IAAI,GAAY,EAAG,EAAI,KAAK,IAAI,GAChD,EAAI,EAAG,EAAI,KAAK,IAAI,GAAY,EAAG,EAAI,KAAK,IAAI,KAsDzC,QAAA,QAAA,EAjDR,IAAM,EAAM,SAAC,EAAY,GACrB,OAAA,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,GAgDpB,QAAA,IAAA,EA5CR,IAAM,EAAQ,SAAC,EAAY,GAC9B,OAAA,EAAS,EAAI,CAAE,EAAG,EAAQ,EAAG,KA2ClB,QAAA,MAAA,EAxCR,IAAM,EAAY,SAAC,GAChB,IAAA,EAAS,EAAI,EAAO,GACnB,OAAA,EAAM,EAAI,IAAW,EAAA,EAAW,EAAI,IAsChC,QAAA,UAAA,EAlCR,IAAM,EAAS,SAAC,GACnB,OAAA,KAAK,KAAK,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,IAiCvB,QAAA,OAAA,EA9BR,IAAM,EAAW,SAAC,EAAY,GACjC,OAAA,KAAK,MAAM,EAAG,EAAI,EAAG,EAAG,EAAG,EAAI,EAAG,IA6BvB,QAAA,SAAA,EA1BR,IAAM,EAAY,SAAC,GACtB,OAAC,KAAK,MAAM,EAAG,EAAG,EAAG,GAAK,KAAK,IAyBpB,QAAA,UAAA,EAtBR,IAAM,EAAK,SAAC,EAAY,GAC1B,MAAA,CAAE,EAAG,EAAE,EAAG,GAAI,EAAG,EAAE,EAAG,KAqBZ,QAAA,GAAA,EAjBf,IAAM,EAAS,CACX,OAAA,EACA,IAAA,EACA,SAAA,EACA,SAAA,EACA,OAAA,EACA,OAAA,EACA,MAAA,EACA,OAAA,EACA,SAAA,EACA,UAAA,EACA,UAAA,EACA,GAAA,EACA,IAAA,GAIW,EAAA,EAAA,QAAA,QAAA;;ACuFA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,gBAAA,EArLf,IAYY,EAZZ,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,mBACA,EAAA,QAAA,kBAmLe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,IAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,GAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,QAAA,WAAA,EAzKf,SAAY,GACR,EAAA,KAAA,aACA,EAAA,WAAA,kBACA,EAAA,SAAA,gBAHJ,CAAY,IAAA,QAAA,WAAA,EAAU,KAOP,IAAA,EAAA,WA6BX,SAAA,IAAA,IAAA,EAAA,KAAA,EAAA,KAAA,GAjBU,KAAA,WAAa,EAAO,QAAA,WACpB,KAAA,QAAkB,CAAE,EAAG,GAAK,EAAG,IAC/B,KAAA,OAAiB,CAAE,EAAG,EAAG,EAAG,GAC5B,KAAA,WAAqB,EACvB,KAAA,OAAS,CACb,UAAU,EACV,UAAU,EACV,SAAU,CACN,KAAM,CACF,MAAO,KACP,YAAa,KACb,OAAQ,CAAE,EAAG,EAAG,EAAG,MAoFvB,KAAA,iBAAmB,IAAI,EAAJ,QAAkB,EAAU,UAAA,WAAY,SAAC,GAE5D,GADJ,EAAM,iBACF,EAAK,OAAO,SAAU,CACR,IAAA,EAAY,EAAK,OAAO,SAA9B,KACR,EAAQ,MAAQ,EAChB,EAAQ,YAAc,CAClB,EAAG,EAAM,MAAQ,EAAK,QAAQ,cAAc,WAC5C,EAAG,EAAM,MAAQ,EAAK,QAAQ,cAAc,WAG5C,EAAK,OAAO,SACZ,EAAK,QAAQ,cACT,IAAI,YAAY,EAAW,KAAM,CAC7B,SAAS,EACT,OAAQ,MAIhB,EAAK,OAAO,SAAS,KAAK,QAAS,EAAS,EAAA,UAAA,EAAQ,MAAO,EAAQ,aACnE,EAAK,QAAQ,cACT,IAAI,YAAY,EAAW,WAAY,CACnC,SAAS,EACT,OAAQ,KAGhB,EAAK,OAAO,UAAW,MAK3B,KAAA,iBAAmB,IAAI,EAAJ,QAAkB,EAAU,UAAA,WAAY,SAAC,GAChE,EAAM,iBACD,EAAK,OAAO,WACb,EAAK,QAAQ,UAAU,IAAI,UAC3B,EAAK,OAAO,UAAW,KAIvB,KAAA,eAAiB,IAAI,EAAJ,QAAkB,EAAU,UAAA,SAAU,SAAC,GAExD,GADJ,EAAM,iBACF,EAAK,OAAO,SAAU,CACtB,EAAK,QAAQ,UAAU,OAAO,UAC9B,EAAK,OAAO,UAAW,EACvB,EAAK,OAAO,UAAW,EAET,IAAA,EAAY,EAAK,OAAO,SAA9B,KACR,EAAK,QAAQ,cAAc,IAAI,YAAY,EAAW,SAAU,CAC5D,SAAS,EACT,OAAQ,QA7HX,KAAA,SAAW,SAAS,cAAc,OAClC,KAAA,SAAS,MAAM,SAAW,WAC1B,KAAA,SAAS,MAAM,OAAS,MACxB,KAAA,SAAS,MAAM,kBAAoB,YACnC,KAAA,SAAS,MAAM,0BAA4B,uBAgIzC,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA5HI,MAAA,SAAA,GACX,EAAO,OAAO,KAAK,UAEd,KAAA,iBACA,UAAU,UACV,KAAA,iBACA,UAAU,KAAK,SACf,KAAA,eACA,UAAU,YAoHR,CAAA,IAAA,UAjHG,MAAA,WACL,KAAA,iBACA,UACA,KAAA,iBACA,UACA,KAAA,eACA,UACA,KAAA,SAAS,WA0GP,CAAA,IAAA,OAvGA,MAAA,WACwB,IAAA,EAAA,KAAK,WAA5B,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,GAAI,EAAA,EAAA,GACnB,KAAA,QAAQ,MAAM,gBAAqB,GAAA,OAAgB,IAAhB,KAAK,OAAO,EAAY,MAAA,OAAgB,IAAhB,KAAK,OAAO,EAA5E,KACK,KAAA,QAAQ,MAAM,UAAsB,UAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,KAAK,EAAI,EAAO,MAAA,OAAA,KAAK,EAAI,EAA1F,OAoGO,CAAA,IAAA,UAhGO,IAAA,WACP,OAAA,KAAK,WA+FL,CAAA,IAAA,YA5FS,IAAA,WACT,MAAA,CAAE,EAAG,KAAK,MAAO,EAAG,KAAK,UA2FzB,CAAA,IAAA,QAxFK,IAAA,WACL,OAAA,KAAK,SAAS,cAuFd,CAAA,IAAA,SApFM,IAAA,WACN,OAAA,KAAK,SAAS,eAmFd,CAAA,IAAA,SAhFM,IAAA,WACN,OAAA,KAAK,SAGE,IAAA,SAAA,GACT,KAAA,QAAU,IA2ER,CAAA,IAAA,QAxEK,IAAA,WACL,OAAA,KAAK,SAGC,IAAA,SAAA,GACR,KAAA,OAAS,IAmEP,CAAA,IAAA,YAhES,IAAA,WACT,OAAA,KAAK,YAGK,IAAA,SAAA,GACZ,KAAA,WAAa,MA2DX,EAlKA,GAkKA,EAAA,EAAA,QAAA,QAAA;;ACjGA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EApFf,IAAA,EAAA,QAAA,kBAEA,EAAA,EAAA,QAAA,YAkFe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,oBAAA,SAAA,QAAA,IAAA,QAAA,IAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,SAAA,EAAA,EAAA,GAAA,MAAA,OAAA,UAAA,eAAA,KAAA,EAAA,IAAA,QAAA,EAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,mBAAA,GAAA,OAAA,EAAA,MAAA,IAAA,UAAA,sDAAA,EAAA,UAAA,OAAA,OAAA,GAAA,EAAA,UAAA,CAAA,YAAA,CAAA,MAAA,EAAA,UAAA,EAAA,cAAA,KAAA,GAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,OAAA,gBAAA,SAAA,EAAA,GAAA,OAAA,EAAA,UAAA,EAAA,IAAA,EAAA,GAAA,SAAA,EAAA,GAAA,IAAA,EAAA,IAAA,OAAA,WAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,EAAA,MAAA,YAAA,EAAA,QAAA,UAAA,EAAA,UAAA,QAAA,EAAA,EAAA,MAAA,KAAA,WAAA,OAAA,EAAA,KAAA,IAAA,SAAA,EAAA,EAAA,GAAA,OAAA,GAAA,WAAA,EAAA,IAAA,mBAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,GAAA,QAAA,IAAA,EAAA,MAAA,IAAA,eAAA,6DAAA,OAAA,EAAA,SAAA,IAAA,GAAA,oBAAA,UAAA,QAAA,UAAA,OAAA,EAAA,GAAA,QAAA,UAAA,KAAA,OAAA,EAAA,GAAA,mBAAA,MAAA,OAAA,EAAA,IAAA,OAAA,KAAA,UAAA,SAAA,KAAA,QAAA,UAAA,KAAA,GAAA,gBAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,OAAA,eAAA,OAAA,eAAA,SAAA,GAAA,OAAA,EAAA,WAAA,OAAA,eAAA,KAAA,GA9ET,IAAA,EAAA,SAAA,GA8ES,EAAA,EA9EK,EAAA,SA8EL,IAAA,EAAA,EAAA,GA3EC,SAAA,EAAA,EAAW,GAAS,IAAA,EAAA,OAAA,EAAA,KAAA,IAC5B,EAAA,EAAA,KAAA,OACK,UAAY,CAAE,EAAA,EAAG,EAAA,GACjB,EAAA,QAAQ,UAAY,cACpB,EAAA,QAAQ,MAAM,OAAS,UAJA,EA2ErB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UApEI,MAAA,SAAA,GACG,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,KAAA,KAmEP,CAAA,IAAA,UAhEG,MAAA,WACV,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,QA+DO,CAAA,IAAA,OA5DA,MAAA,WACF,KAAA,YAAa,EAAU,EAAA,WAAA,KAAK,YAAa,KAAK,MAAQ,KAAK,OAAO,GAAI,KAAK,OAAS,KAAK,OAAO,GAChG,KAAA,YAAa,EAAO,EAAA,QAAA,KAAK,WAAY,KAAK,WAEhB,IAAA,EAAA,KAAK,WAA5B,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,GAAI,EAAA,EAAA,GACnB,KAAA,QAAQ,MAAM,gBAAqB,GAAA,OAAgB,IAAhB,KAAK,OAAO,EAAY,MAAA,OAAgB,IAAhB,KAAK,OAAO,EAA5E,KACK,KAAA,QAAQ,MAAM,UAAsB,UAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,KAAK,EAAI,EAAO,MAAA,OAAA,KAAK,EAAI,EAA1F,OAsDO,CAAA,IAAA,WAnDQ,IAAA,WACR,MAAA,CAAE,EAAG,KAAK,EAAG,EAAG,KAAK,IAGZ,IAAA,SAAA,GACX,KAAA,EAAI,EAAM,EACV,KAAA,EAAI,EAAM,IA6CR,CAAA,IAAA,IA1CC,IAAA,WACD,OAAA,KAAK,UAAU,GAGb,IAAA,SAAA,GACJ,KAAA,UAAU,EAAI,IAqCZ,CAAA,IAAA,IAlCC,IAAA,WACD,OAAA,KAAK,UAAU,GAGb,IAAA,SAAA,GACJ,KAAA,UAAU,EAAI,IA6BZ,CAAA,IAAA,IA1BC,IAAA,WACD,MAAA,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,MAyBtB,CAAA,IAAA,IAtBC,IAAA,WACD,MAAA,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,MAqBtB,CAAA,IAAA,KAlBE,IAAA,WACF,OAAA,KAAK,EAAI,KAAK,MAAQ,KAAK,OAAO,IAiBlC,CAAA,IAAA,KAdE,IAAA,WACF,OAAA,KAAK,EAAI,KAAK,OAAS,KAAK,OAAO,IAanC,CAAA,IAAA,KAVE,IAAA,WACF,OAAA,KAAK,EAAI,KAAK,OAAS,EAAI,KAAK,OAAO,KASvC,CAAA,IAAA,KANE,IAAA,WACF,OAAA,KAAK,EAAI,KAAK,OAAS,EAAI,KAAK,OAAO,OAKvC,EA9ET,GA8ES,EAAA,EAAA,QAAA,QAAA;;ACvBA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAxDf,IAAA,EAAA,WAAM,IAAA,EAAN,WAUgB,SAAA,EAAA,GAAa,IAAA,EAAA,KAAA,EAAA,KAAA,GARR,KAAA,OAAS,CACtB,YAAa,KACb,QAAQ,EACR,OAAQ,IAwBK,KAAA,aAAe,SAAC,GAC7B,EAAM,iBACF,EAAmB,UACnB,EAAK,OAAO,QAAS,EACrB,EAAK,QAAQ,QAAQ,UAAU,IAAI,YAI1B,KAAA,WAAa,SAAC,GAC3B,EAAM,iBACF,EAAmB,UACnB,EAAK,OAAO,QAAS,EACrB,EAAK,QAAQ,QAAQ,UAAU,OAAO,YAI7B,KAAA,UAAY,SAAC,GACtB,GAAA,EAAmB,QAAS,CAE5B,EAAK,QAAQ,WADC,KACoB,KAAK,GAAK,KAAK,KAAK,EAAM,QACzC,SAAS,cAAc,aAC/B,YAAiB,GAAA,QAAC,EAAK,QAAQ,WAAa,IAAM,KAAK,KAAK,QAAQ,GAA/E,OAvCC,KAAA,QAAU,EACV,KAAA,OAAO,YAAc,sBAAsB,WAC5C,EAAK,QAAQ,QAAQ,iBAAiB,YAAa,EAAK,cACxD,SAAS,iBAAiB,UAAW,EAAK,YAC1C,SAAS,iBAAiB,QAAS,EAAK,aAfpD,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UAmBkB,MAAA,WACsB,OAA5B,KAAK,OAAO,YACZ,qBAAqB,KAAK,OAAO,cAE5B,KAAA,QAAQ,QAAQ,oBAAoB,YAAa,KAAK,cAC3D,SAAS,oBAAoB,UAAW,KAAK,YAC7C,SAAS,oBAAoB,SAAU,KAAK,gBAzBxD,EAAA,GAqDA,OA7CkB,EAAA,SAAU,EA6C5B,EArDA,GAwDe,EAAA,EAAA,QAAA,QAAA;;ACwEA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EArIf,IAAA,EAAA,QAAA,kBACA,EAAA,EAAA,QAAA,mBAEA,EAAA,EAAA,QAAA,YAkIe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,IAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,GAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,oBAAA,SAAA,QAAA,IAAA,QAAA,IAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,SAAA,EAAA,EAAA,GAAA,MAAA,OAAA,UAAA,eAAA,KAAA,EAAA,IAAA,QAAA,EAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,mBAAA,GAAA,OAAA,EAAA,MAAA,IAAA,UAAA,sDAAA,EAAA,UAAA,OAAA,OAAA,GAAA,EAAA,UAAA,CAAA,YAAA,CAAA,MAAA,EAAA,UAAA,EAAA,cAAA,KAAA,GAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,OAAA,gBAAA,SAAA,EAAA,GAAA,OAAA,EAAA,UAAA,EAAA,IAAA,EAAA,GAAA,SAAA,EAAA,GAAA,IAAA,EAAA,IAAA,OAAA,WAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,EAAA,MAAA,YAAA,EAAA,QAAA,UAAA,EAAA,UAAA,QAAA,EAAA,EAAA,MAAA,KAAA,WAAA,OAAA,EAAA,KAAA,IAAA,SAAA,EAAA,EAAA,GAAA,OAAA,GAAA,WAAA,EAAA,IAAA,mBAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,GAAA,QAAA,IAAA,EAAA,MAAA,IAAA,eAAA,6DAAA,OAAA,EAAA,SAAA,IAAA,GAAA,oBAAA,UAAA,QAAA,UAAA,OAAA,EAAA,GAAA,QAAA,UAAA,KAAA,OAAA,EAAA,GAAA,mBAAA,MAAA,OAAA,EAAA,IAAA,OAAA,KAAA,UAAA,SAAA,KAAA,QAAA,UAAA,KAAA,GAAA,gBAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,OAAA,eAAA,OAAA,eAAA,SAAA,GAAA,OAAA,EAAA,WAAA,OAAA,eAAA,KAAA,GA9HT,IAAA,EAAA,SAAA,GA8HS,EAAA,EA9HI,EAAA,SA8HJ,IAAA,EAAA,EAAA,GA1HC,SAAA,EAAA,EAAe,GAAa,IAAA,EAAA,EAAA,KAAA,IACpC,EAAA,EAAA,KAAA,OACK,OAAS,CAAE,EAAG,EAAG,EAAG,IAEpB,EAAA,QAAU,EACV,EAAA,QAAU,EAET,IAAA,EAAQ,SAAS,cAAc,OAPD,OAQpC,EAAM,UAAY,aACb,EAAA,QAAQ,MAAM,OAAS,IACvB,EAAA,QAAQ,OAAO,GAVgB,EA0H7B,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA7GI,MAAA,SAAA,GACG,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,KAAA,GACT,KAAA,QAAQ,QAAQ,GAChB,KAAA,QAAQ,QAAQ,KA0Gd,CAAA,IAAA,UAvGG,MAAA,WACV,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,MACK,KAAA,QAAQ,UACR,KAAA,QAAQ,YAoGN,CAAA,IAAA,OAjGA,MAAA,WACF,KAAA,QAAQ,OACR,KAAA,QAAQ,OAER,KAAA,QAAQ,MAAM,MAAW,GAAA,QAAA,EAAS,EAAA,UAAA,KAAK,EAAG,KAAK,GAApD,MAEK,KAAA,YAAa,EAAU,EAAA,WAAA,KAAK,WAAY,KAAK,OAAO,GAAI,KAAK,OAAS,KAAK,OAAO,GAClF,KAAA,YAAa,EAAO,EAAA,QAAA,KAAK,WAAY,KAAK,WAC/C,EAAA,EAAA,EAAA,WAAA,OAAA,MAAA,KAAA,QAyFO,CAAA,IAAA,WAtFQ,IAAA,WACR,MAAA,CAAE,EAAG,KAAK,EAAG,EAAG,KAAK,IAGZ,IAAA,SAAA,GACV,IAAA,GAAS,EAAS,EAAA,UAAA,KAAK,EAAG,KAAK,GAChC,KAAA,EAAI,EACJ,KAAA,GAAI,EAAI,EAAA,KAAA,EAAO,KA+Eb,CAAA,IAAA,IA5EC,IAAA,WACD,OAAA,KAAK,IAGH,IAAA,SAAA,GACJ,KAAA,SAAW,CAAE,EAAG,EAAO,EAAG,KAAK,KAuE7B,CAAA,IAAA,IApEC,IAAA,WACD,OAAA,KAAK,IAGH,IAAA,SAAA,GACJ,KAAA,SAAW,CAAE,EAAG,KAAK,EAAG,EAAG,KA+DzB,CAAA,IAAA,IA5DC,IAAA,WACD,OAAA,KAAK,QAAQ,UAGX,IAAA,SAAA,GACJ,KAAA,QAAQ,SAAW,IAuDjB,CAAA,IAAA,IApDC,IAAA,WACD,OAAA,KAAK,QAAQ,UAGX,IAAA,SAAA,GACJ,KAAA,QAAQ,SAAW,IA+CjB,CAAA,IAAA,KA5CE,IAAA,WACF,OAAA,KAAK,EAAE,GAGJ,IAAA,SAAA,GACL,KAAA,EAAE,EAAI,IAuCJ,CAAA,IAAA,KApCE,IAAA,WACF,OAAA,KAAK,EAAE,GAGJ,IAAA,SAAA,GACL,KAAA,EAAE,EAAI,IA+BJ,CAAA,IAAA,KA5BE,IAAA,WACF,OAAA,KAAK,EAAE,GAGJ,IAAA,SAAA,GACL,KAAA,EAAE,EAAI,IAuBJ,CAAA,IAAA,KApBE,IAAA,WACF,OAAA,KAAK,EAAE,GAGJ,IAAA,SAAA,GACL,KAAA,EAAE,EAAI,IAeJ,CAAA,IAAA,YAZS,IAAA,WACT,OAAA,EAAU,EAAA,YAAA,EAAU,EAAA,YAAA,EAAS,EAAA,UAAA,KAAK,EAAG,KAAK,MAGhC,IAAA,SAAA,GACX,IAAA,EAAQ,EAAQ,KAAK,WACtB,KAAA,EAAI,EAAO,QAAA,OAAO,KAAK,EAAG,KAAK,EAAG,GAClC,KAAA,YAAa,EAAU,EAAA,YAAA,EAAU,EAAA,YAAA,EAAS,EAAA,UAAA,KAAK,EAAG,KAAK,SAKrD,EA9HT,GA8HS,EAAA,EAAA,QAAA,QAAA;;ACkEA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAvMf,IAAA,EAAA,EAAA,QAAA,oCACA,EAAA,QAAA,kBACA,EAAA,QAAA,kBACA,EAAA,EAAA,QAAA,WAEA,EAAA,EAAA,QAAA,YAkMe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,oBAAA,SAAA,QAAA,IAAA,QAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,OAAA,yBAAA,EAAA,IAAA,IAAA,OAAA,EAAA,IAAA,KAAA,EAAA,IAAA,EAAA,IAAA,EAAA,SAAA,OAAA,EAAA,GAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,CAAA,IAAA,EAAA,SAAA,OAAA,EAAA,EAAA,MAAA,EAAA,OAAA,eAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,MAAA,IAAA,MAAA,0BAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,oBAAA,SAAA,QAAA,IAAA,QAAA,IAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,SAAA,EAAA,EAAA,GAAA,MAAA,OAAA,UAAA,eAAA,KAAA,EAAA,IAAA,QAAA,EAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,mBAAA,GAAA,OAAA,EAAA,MAAA,IAAA,UAAA,sDAAA,EAAA,UAAA,OAAA,OAAA,GAAA,EAAA,UAAA,CAAA,YAAA,CAAA,MAAA,EAAA,UAAA,EAAA,cAAA,KAAA,GAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,OAAA,gBAAA,SAAA,EAAA,GAAA,OAAA,EAAA,UAAA,EAAA,IAAA,EAAA,GAAA,SAAA,EAAA,GAAA,IAAA,EAAA,IAAA,OAAA,WAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,IAAA,EAAA,EAAA,MAAA,YAAA,EAAA,QAAA,UAAA,EAAA,UAAA,QAAA,EAAA,EAAA,MAAA,KAAA,WAAA,OAAA,EAAA,KAAA,IAAA,SAAA,EAAA,EAAA,GAAA,OAAA,GAAA,WAAA,EAAA,IAAA,mBAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,GAAA,QAAA,IAAA,EAAA,MAAA,IAAA,eAAA,6DAAA,OAAA,EAAA,SAAA,IAAA,GAAA,oBAAA,UAAA,QAAA,UAAA,OAAA,EAAA,GAAA,QAAA,UAAA,KAAA,OAAA,EAAA,GAAA,mBAAA,MAAA,OAAA,EAAA,IAAA,OAAA,KAAA,UAAA,SAAA,KAAA,QAAA,UAAA,KAAA,GAAA,gBAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,OAAA,eAAA,OAAA,eAAA,SAAA,GAAA,OAAA,EAAA,WAAA,OAAA,eAAA,KAAA,GA9LT,IAAA,EAAA,SAAA,GA8LS,EAAA,EA9LO,EAAA,SA8LP,IAAA,EAAA,EAAA,GAzLmB,SAAA,IAAA,IAAA,EAAA,EAAA,KAAA,IAC1B,EAAA,EAAA,KAAA,OALa,WAAa,IAAI,EAAJ,QAAb,EAAA,IAIF,IAAA,IAAA,EAAA,UAAA,OAAA,EAAe,IAAA,MAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAAf,EAAe,GAAA,UAAA,GAErB,EAAA,QAAU,EAEV,EAAA,QAAU,GACV,IAAA,IAAI,EAAI,EAAG,EAAI,EAAI,EAAG,EAAI,EAAO,OAAQ,IAAK,IAC3C,EAAI,EAAO,OACN,EAAA,QAAQ,KAAK,EAAO,GAAI,IAAI,EAAJ,QAAS,EAAO,GAAI,EAAO,KAEnD,EAAA,QAAQ,KAAK,EAAO,GAAI,IAAI,EAAJ,QAAS,EAAO,GAAI,EAAO,KATtC,OAarB,EAAA,QAAQ,UAAY,gBACpB,EAAA,QAAQ,MAAM,OAAS,OAdF,EAyLnB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UAxKI,MAAA,SAAA,GACG,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,KAAA,GACM,IAFU,EAEV,EAAA,EAAA,KAAK,SAFK,IAEI,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,EAAA,MACxB,QAAQ,IAHY,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,OAwKvB,CAAA,IAAA,UAjKG,MAAA,WACV,EAAA,EAAA,EAAA,WAAA,UAAA,MAAA,KAAA,MACoB,IAFV,EAEU,EAAA,EAAA,KAAK,SAFf,IAEwB,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,EAAA,MACxB,WAHA,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,OAiKH,CAAA,IAAA,OA1JA,MAAA,WACa,IADb,EACa,EAAA,EAAA,KAAK,SADlB,IAC2B,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,EAAA,MACxB,QAFH,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAKF,KAAA,QAAQ,MAAM,MAAW,GAAA,OAAA,KAAK,MAAnC,MACK,KAAA,QAAQ,MAAM,OAAY,GAAA,OAAA,KAAK,OAApC,MAEK,KAAA,YAAa,EAAU,EAAA,WAAA,KAAK,YAAa,KAAK,MAAQ,KAAK,OAAO,GAAI,KAAK,OAAS,KAAK,OAAO,GACrG,EAAA,EAAA,EAAA,WAAA,OAAA,MAAA,KAAA,QAiJO,CAAA,IAAA,SA9IM,IAAA,WACN,OAAA,KAAK,UA6IL,CAAA,IAAA,QA1IK,IAAA,WACL,OAAA,KAAK,GAAK,KAAK,KAyIf,CAAA,IAAA,SAtIM,IAAA,WACN,OAAA,KAAK,GAAK,KAAK,KAqIf,CAAA,IAAA,iBAlIc,IAAA,WACd,MAAA,CAAE,EAAG,KAAK,WAAY,EAAG,KAAK,eAiI9B,CAAA,IAAA,aA9HU,IAAA,WACV,OAAA,EAAS,EAAA,UAAA,KAAK,EAAG,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,OA6HvC,CAAA,IAAA,cA1HW,IAAA,WACX,OAAA,EAAS,EAAA,UAAA,KAAK,EAAG,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,OAyHvC,CAAA,IAAA,WAtHQ,IAAA,WAGR,MAAA,CAAE,EAFC,KAAK,GAAK,KAAK,MAAQ,KAAK,OAAO,EAEjC,EADJ,KAAK,GAAK,KAAK,OAAS,KAAK,OAAO,IAI5B,IAAA,SAAA,GACV,IADuB,EACvB,EAAW,KAAK,SACF,EAAA,EAAA,KAAK,SAFI,IAEK,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAvB,IAAA,EAAuB,EAAA,MACxB,GAAQ,EAAS,EAAA,UAAA,EAAM,SAAU,GACnC,EAAM,IAAM,EAAS,EACrB,EAAM,EAAI,EAAM,EACT,EAAM,EAAI,EAAS,EAC1B,EAAM,EAAI,EAAM,EAAI,EAAM,EACnB,EAAM,EAAI,EAAS,IAC1B,EAAM,EAAI,EAAM,EAAI,EAAM,GAG1B,EAAM,IAAM,EAAS,EACrB,EAAM,EAAI,EAAM,EACT,EAAM,EAAI,EAAS,EAC1B,EAAM,EAAI,EAAM,EAAI,EAAM,EACnB,EAAM,EAAI,EAAS,IAC1B,EAAM,EAAI,EAAM,EAAI,EAAM,IAjBL,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,OAgHtB,CAAA,IAAA,IA1FC,IAAA,WACD,OAAA,KAAK,SAAS,GAGZ,IAAA,SAAA,GACJ,KAAA,SAAW,CAAE,EAAG,EAAO,EAAG,KAAK,KAqF7B,CAAA,IAAA,IAlFC,IAAA,WACD,OAAA,KAAK,SAAS,GAGZ,IAAA,SAAA,GACJ,KAAA,SAAW,CAAE,EAAG,KAAK,EAAG,EAAG,KA6EzB,CAAA,IAAA,IA1EC,IAAA,WACD,MAAA,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,MAyEtB,CAAA,IAAA,IAtEC,IAAA,WACD,MAAA,CAAE,EAAG,KAAK,GAAI,EAAG,KAAK,MAqEtB,CAAA,IAAA,KAlEE,IAAA,WACF,OAAA,KAAK,IAAL,MAAA,KAAY,EAAA,KAAK,QAAQ,IAAI,SAAA,GAAS,OAAA,EAAM,QAiE5C,CAAA,IAAA,KA9DE,IAAA,WACF,OAAA,KAAK,IAAL,MAAA,KAAY,EAAA,KAAK,QAAQ,IAAI,SAAA,GAAS,OAAA,EAAM,QA6D5C,CAAA,IAAA,KA1DE,IAAA,WACF,OAAA,KAAK,IAAL,MAAA,KAAY,EAAA,KAAK,QAAQ,IAAI,SAAA,GAAS,OAAA,EAAM,QAyD5C,CAAA,IAAA,KAtDE,IAAA,WACF,OAAA,KAAK,IAAL,MAAA,KAAY,EAAA,KAAK,QAAQ,IAAI,SAAA,GAAS,OAAA,EAAM,QAqD5C,CAAA,IAAA,QAlDK,IAAA,WACL,OAAA,KAAK,QAGC,IAAA,SAAA,GACP,IAAA,GAAQ,EAAO,EAAA,QAAA,EAAO,KAAK,QAE3B,EAAiB,KAAK,OACtB,EAAoB,KAAK,WAE1B,KAAA,OAAS,CAAE,EAAG,GAAK,EAAG,IACtB,KAAA,UAAY,EACZ,KAAA,OAAS,EACR,IAToB,EASpB,EAAiB,GAAb,KAAK,MACT,EAAkB,GAAd,KAAK,OAEE,EAAA,KAAK,SAAd,EAAA,EAAA,EAAG,EAAA,EAAA,EACS,EAAA,EAAA,KAAK,SAbC,IAaQ,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAvB,IAAA,EAAuB,EAAA,MAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAI,GAAM,EACxC,EAAM,EAAM,EAAM,GAAM,EAAM,EAAI,GAAM,GAflB,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAkBrB,KAAA,OAAS,CAAE,EAAG,KAAK,IAAI,EAAe,EAAK,EAAI,KAAK,OAAS,EAAG,KAAK,IAAK,EAAI,KAAK,OAAU,EAAe,IAC5G,KAAA,UAAY,EACZ,KAAA,OAAS,EAET,KAAA,OAAS,IAwBP,CAAA,IAAA,YArBS,IAAA,WAChB,OAAA,EAAA,EAAA,EAAA,WAAA,YAAA,OAGiB,IAAA,SAAA,GACb,KAAK,IAAI,IAAU,EAAI,KAAK,KAC5B,EAAQ,GAGN,IALwB,EAKxB,EAAQ,EAAd,EAAA,EAAA,EAAA,WAAA,YAAA,MACM,EAAW,KAAK,SACF,EAAA,EAAA,KAAK,SAPK,IAOI,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAvB,IAAA,EAAuB,EAAA,MAC9B,EAAM,UAAW,EAAO,EAAA,QAAA,EAAU,EAAO,GACzC,EAAM,UAAY,GATQ,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAYZ,EAAA,EAAA,EAAA,WAAA,YAAA,EAAlB,MAAA,OAKO,EA9LT,GA8LS,EAAA,EAAA,QAAA,QAAA;;AC/IA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAxDf,IAAA,EAAA,EAAA,QAAA,gCACA,EAAA,QAAA,uBAGA,EAAA,QAAA,uBAoDe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAvCT,IAAA,EAAA,WAKU,SAAA,EAAA,EAAqB,EAAkB,GAA2C,EAAA,KAAA,GAoB7E,KAAA,YAAc,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GACxB,IAAA,EAAA,EAAM,OAArC,EAAA,EAAA,MAAO,EAAA,EAAA,YAAa,EAAA,EAAA,OAC5B,EAAM,UAAW,EAAI,EAAA,KAAA,EAAa,KAGrB,KAAA,cAAgB,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GAClC,IAAA,EAAA,EAAM,OAA7B,EAAA,EAAA,MAAO,EAAA,EAAA,YACf,QAAQ,IAAI,GACZ,EAAM,SAAW,IA3BZ,KAAA,QAAU,EACV,KAAA,SAAW,EACX,KAAA,QAAU,EAEV,KAAA,YACA,UAAU,KAAK,SAAS,SACT,IAPsE,EAOtE,EAAA,EAAA,KAAK,SAAS,QAPwD,IAOhD,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAA/B,IAAA,EAA+B,EAAA,MACjC,KAAA,cACA,UAAU,EAAM,UATiE,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,KAkCnF,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UArBG,MAAA,WACL,KAAA,YACA,UACA,KAAA,cACA,cAiBE,EAvCT,GAuCS,EAAA,EAAA,QAAA,QAAA;;AC0CA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAlGf,IAAA,EAAA,EAAA,QAAA,gCACA,EAAA,QAAA,uBAGA,EAAA,QAAA,uBA8Fe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAjFT,IAAA,EAAA,WAMU,SAAA,EAAA,EAAqB,EAAkB,GAA2C,IAAA,EAAA,KAAA,EAAA,KAAA,GA4B7E,KAAA,YAAc,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GACxB,IAAA,EAAA,EAAM,OAArC,EAAA,EAAA,MAAO,EAAA,EAAA,YAAa,EAAA,EAAA,OAC5B,EAAM,UAAW,EAAI,EAAA,KAAA,EAAa,KAGrB,KAAA,cAAgB,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GAC7D,QAAgB,IAAhB,EAAK,OAAL,CAOA,IAAA,EAAA,EAAK,OAFL,EAAA,EAAA,qBAAsB,EAAA,EAAA,2BAA4B,EAAA,EAAA,oBAClD,EAAA,EAAA,mBAAoB,EAAA,EAAA,qBAEhB,EAAgB,EAAM,OAAtB,YACF,GAAS,EAAS,EAAA,UAAA,EAAa,GACjC,GAAU,EAAS,EAAA,UAAA,EAAoB,GACrC,GAAQ,EAAM,EAAA,OAAA,EAAqB,EAAS,EAAU,GAC5D,EAAK,SAAS,OAAS,EACvB,EAAK,SAAS,OAAQ,EAAI,EAAA,KAAA,EAAO,GACjC,EAAK,SAAS,OAAS,KAGV,KAAA,mBAAqB,IAAI,EAAJ,QAAkB,EAAW,WAAA,WAAY,SAAC,GACpE,IAAA,EAAU,EAAM,OAAhB,MACR,EAAK,OAAS,CACV,qBAAsB,EAAK,SAAS,OACpC,4BAA4B,EAAG,EAAA,KAAA,EAAO,EAAA,SAAA,EAAS,EAAA,UAAA,EAAO,EAAK,SAAS,GAAI,EAAK,SAAS,WAAY,SAAA,GAAK,SAAG,KAAK,MAAM,KACrH,oBAAqB,EAAK,SAAS,MACnC,mBAAoB,EAAM,SAC1B,qBAAsB,EAAK,SAAS,OAC/B,OACG,SAAC,EAAU,GACP,OAAA,EAAS,EAAA,UAAA,EAAO,IAAQ,EAAS,EAAA,UAAA,EAAO,GACpC,EAAO,IACjB,YAIG,KAAA,iBAAmB,IAAI,EAAJ,QAAkB,EAAW,WAAA,SAAU,SAAC,GACxE,EAAK,SAAS,OAAS,EAAK,OAAO,4BAC5B,EAAK,SApEP,KAAA,QAAU,EACV,KAAA,SAAW,EACX,KAAA,QAAU,EAEV,KAAA,YACA,UAAU,KAAK,SAAS,SACT,IAPsE,EAOtE,EAAA,EAAA,KAAK,SAAS,QAPwD,IAOhD,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAA/B,IAAA,EAA+B,EAAA,MACjC,KAAA,cACA,UAAU,EAAM,SAChB,KAAA,mBACA,UAAU,EAAM,SAChB,KAAA,iBACA,UAAU,EAAM,UAbiE,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,KA2EnF,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA1DG,MAAA,WACL,KAAA,YACA,UACA,KAAA,cACA,UACA,KAAA,mBACA,UACA,KAAA,iBACA,cAkDE,EAjFT,GAiFS,EAAA,EAAA,QAAA,QAAA;;ACuEA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAzKf,IAAA,EAAA,EAAA,QAAA,gCACA,EAAA,QAAA,uBAGA,EAAA,QAAA,uBAqKe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAtJT,IAAA,EAAA,WAQU,SAAA,EAAA,EAAqB,EAAkB,GAA2D,IAAA,EAAA,KAAA,EAAA,KAAA,GA4B7F,KAAA,YAAc,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GACxB,IAAA,EAAA,EAAM,OAArC,EAAA,EAAA,MAAO,EAAA,EAAA,YAAa,EAAA,EAAA,OAC5B,EAAM,UAAW,EAAI,EAAA,KAAA,EAAa,KAGrB,KAAA,cAAgB,IAAI,EAAJ,QAAkB,EAAW,WAAA,KAAM,SAAC,GAC7D,QAAgB,IAAhB,EAAK,OAAL,CAOA,IAAA,EAAA,EAAK,OAFL,EAAA,EAAA,qBAAsB,EAAA,EAAA,2BAA4B,EAAA,EAAA,oBAC9B,EAApB,EAAA,mBAAqE,GAA9C,EAAA,qBAAsB,EAAA,wBAAiD,EAAtB,EAAA,qBAE1C,EAAA,EAAM,OAAZ,GAApB,EAAA,MAAO,EAAA,aACK,GAAqB,KAAjC,IAAiC,KAA5B,MAA4B,KAArB,KAAK,EAAgB,KAAhB,KAGnB,GAHmC,KAAV,IAGpB,EAAS,EAAA,UAAA,EAAG,IACnB,GAAK,EAAS,EAAA,UAAA,EAAG,GACjB,GAAK,EAAS,EAAA,UAAA,EAAG,GACf,EAAI,GAAK,EAAI,EAAA,MAAA,EAAU,EAAA,WAAA,IAAK,EAAU,EAAA,WAAA,KACtC,EAAI,GAAK,EAAI,EAAA,MAAA,EAAU,EAAA,WAAA,IAAK,EAAU,EAAA,WAAA,KAE5C,EAAK,SAAS,OAAS,EAEjB,IAAA,GAAQ,EAAS,EAAA,UAAA,EAAqB,CACxC,IAAM,EAAI,IAAK,EAAO,EAAA,QAAA,IAAM,EAAO,EAAA,QAAA,KAAO,EAAO,EAAA,QAAA,GAAO,EACxD,IAAM,EAAI,IAAK,EAAO,EAAA,QAAA,IAAM,EAAO,EAAA,QAAA,KAAO,EAAO,EAAA,QAAA,GAAO,IAGxD,EAAM,KAAO,EAAA,IACb,EAAM,EAAI,GAGV,EAAM,KAAO,EAAA,IACb,EAAM,EAAI,GAGd,EAAK,SAAS,OAAQ,EAAI,EAAA,KAAA,EAAqB,GAC/C,EAAK,SAAS,OAAS,KAGV,KAAA,mBAAqB,IAAI,EAAJ,QAAkB,EAAW,WAAA,WAAY,SAAC,GACpE,IAAA,EAAU,EAAM,OAAhB,MAEF,EAA2B,EAAK,SAAS,UAC/C,EAAK,SAAS,UAAY,EACpB,IAAA,GAAS,EAAG,EAAA,KAAA,EAAO,EAAA,SAAA,EAAS,EAAA,UAAA,EAAO,EAAK,SAAS,GAAI,EAAK,SAAS,WAAY,SAAA,GAAK,SAAG,KAAK,MAAM,KACxG,EAAK,SAAS,UAAY,EAEyC,IAC/D,EAAG,EAD4D,EAAA,EAAK,QAA7D,EAAH,EAAA,EAAU,EAAJ,EAAA,GAAW,EAAH,EAAA,EAAU,EAAJ,EAAA,GAAW,EAAH,EAAA,EAAU,EAAJ,EAAA,GAAW,EAAH,EAAA,EAAU,EAAJ,EAAA,GAE/C,OAAA,GACA,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACC,KAAA,EACD,EAAI,EACJ,EAAI,EACJ,MACJ,QACU,MAAA,IAAI,MAGlB,EAAK,OAAS,CACV,uBAAwB,EAAE,SAC1B,qBAAsB,EAAE,SACxB,qBAAsB,EAAK,SAAS,OACpC,2BAA4B,EAC5B,oBAAqB,EAAK,SAAS,MACnC,mBAAoB,EAAM,SAC1B,qBAAsB,EAAK,SAAS,OAC/B,OACG,SAAC,EAAU,GACP,OAAA,EAAS,EAAA,UAAA,EAAO,IAAQ,EAAS,EAAA,UAAA,EAAO,GACpC,EAAO,IACjB,YAIG,KAAA,iBAAmB,IAAI,EAAJ,QAAkB,EAAW,WAAA,SAAU,SAAC,UAEjE,EAAK,SAvIP,KAAA,QAAU,EACV,KAAA,SAAW,EACX,KAAA,QAAU,EAEV,KAAA,YACA,UAAU,KAAK,SAAS,SACT,IAPsF,EAOtF,EAAA,EAAA,KAAK,SAAS,QAPwE,IAOhE,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAA/B,IAAA,EAA+B,EAAA,MACjC,KAAA,cACA,UAAU,EAAM,SAChB,KAAA,mBACA,UAAU,EAAM,SAChB,KAAA,iBACA,UAAU,EAAM,UAbiF,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,KA8InG,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UA7HG,MAAA,WACL,KAAA,YACA,UACA,KAAA,cACA,UACA,KAAA,mBACA,UACA,KAAA,iBACA,cAqHE,EAtJT,GAsJS,EAAA,EAAA,QAAA,QAAA;;AC7EA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA1Ff,IAAA,EAAA,EAAA,QAAA,uBACA,EAAA,EAAA,QAAA,yBACA,EAAA,EAAA,QAAA,mCACA,EAAA,EAAA,QAAA,qCACA,EAAA,EAAA,QAAA,uCAsFe,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAjFT,IAAA,EAAA,WAKU,SAAA,EAAA,EAAqB,GAAqB,IAAA,EAAA,KAAA,EAAA,KAAA,GAC7C,KAAA,SAAW,EACV,IAAA,EAAI,IAAI,EAAJ,QAAU,EAAG,GACnB,EAAK,IAAI,EAAJ,QAAU,IAAK,GACpB,EAAI,IAAI,EAAJ,QAAU,IAAK,GACnB,EAAK,IAAI,EAAJ,QAAU,IAAK,KACpB,EAAI,IAAI,EAAJ,QAAU,IAAK,KACnB,EAAK,IAAI,EAAJ,QAAU,IAAK,KACpB,EAAI,IAAI,EAAJ,QAAU,EAAG,KACjB,EAAK,IAAI,EAAJ,QAAU,EAAG,KACjB,KAAA,SAAW,IAAI,EAAJ,QAAY,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,GAC/C,KAAA,QAAU,CAAE,EAAA,EAAG,GAAA,EAAI,EAAA,EAAG,GAAA,EAAI,EAAA,EAAG,GAAA,EAAI,EAAA,EAAG,GAAA,GAEpC,KAAA,SAAS,SAAW,IAAI,EAAJ,QAA0B,EAAQ,KAAK,SAAU,KAAK,SACzE,IAAA,EAAsB,SAAS,cAAc,SAC/C,GAAW,EACf,OAAO,iBAAiB,WAAY,SAAC,GACzB,IAAA,EAAQ,EAAR,IACJ,IAAC,EACO,OAAA,GACC,IAAA,IACD,EAAQ,SAAS,UACjB,EAAQ,SAAW,IAAI,EAAJ,QAA0B,EAAQ,EAAK,SAAU,EAAK,SACzE,EAAO,YAAc,iBACrB,MACC,IAAA,IACD,EAAQ,SAAS,UACjB,EAAQ,SAAW,IAAI,EAAJ,QAA4B,EAAQ,EAAK,SAAU,EAAK,SAC3E,EAAO,YAAc,mBACrB,MACC,IAAA,IAED,GAAW,EACX,EAAQ,SAAS,UACjB,EAAQ,SAAW,IAAI,EAAJ,QAAwB,EAAQ,EAAK,SAAU,EAAK,SACvE,EAAO,YAAc,mBACrB,EAAO,MAAM,MAAQ,aACrB,EAAO,MAAM,WAAa,UAMpC,IAAA,EAAa,SAAS,cAAc,OAC1C,EAAW,UAAY,qBACvB,EAAW,MAAM,SAAW,WAC5B,EAAW,MAAM,MAAQ,OACzB,EAAW,MAAM,OAAS,OAC1B,EAAW,MAAM,SAAW,SAGxB,IAAA,EAAI,EAWH,KAAA,SAAS,QAAQ,GACjB,KAAA,SAAS,QAAQ,EAAY,KAAK,SAAU,KAAK,SACtD,sBAZa,SAAP,IACF,EAAK,SAAS,OACd,EAAK,SAAS,KAAK,EAAY,EAAK,SAAU,EAAK,SAE/C,EAAI,IACJ,GAAK,OAET,sBAAsB,KAO1B,EAAO,OAAO,GAUP,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UAPG,MAAA,gBAOH,EAjFT,GAiFS,EAAA,EAAA,QAAA,QAAA;;AC9BA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA9Df,IAAA,EAAA,EAAA,QAAA,wBACA,EAAA,QAAA,uBA6De,SAAA,IAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,GAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EApDT,IAAA,EAAA,WAKF,SAAA,IAAA,EAAA,KAAA,GAHQ,KAAA,WAAqB,EAAO,QAAA,WAI3B,KAAA,SAAW,SAAS,cAAc,OAClC,KAAA,SAAS,UAAY,gBACrB,KAAA,SAAS,MAAM,SAAW,WAC1B,KAAA,SAAS,MAAM,cAAgB,OAC/B,KAAA,SAAS,MAAM,gBAAkB,+DACjC,KAAA,SAAS,MAAM,eAApB,oCACK,KAAA,SAAS,MAAM,iBAApB,YACK,KAAA,SAAS,MAAM,mBAApB,SAuCO,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,UApCI,MAAA,SAAA,EAAqB,EAAkB,GAClD,EAAO,OAAO,KAAK,YAmCZ,CAAA,IAAA,OA/BC,MAAA,SAAA,EAAqB,EAAkB,GACzC,IAAA,GAAQ,EAAS,EAAA,UAAA,EAAO,EAAG,EAAO,GACpC,GAAS,EAAS,EAAA,UAAA,EAAO,EAAG,EAAO,GAElC,KAAA,SAAS,MAAM,MAAW,GAAA,OAAA,EAA/B,MACK,KAAA,SAAS,MAAM,OAAY,GAAA,OAAA,EAAhC,MAEK,KAAA,YAAa,EAAU,EAAA,WAAA,KAAK,YAAa,EAAQ,EAAQ,OAAO,GAAI,EAAS,EAAQ,OAAO,GAC5F,KAAA,YAAa,EAAO,EAAA,QAAA,KAAK,WAAY,EAAQ,WAEnB,IAAA,EAAA,KAAK,WAA5B,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,EAAG,EAAA,EAAA,GAAI,EAAA,EAAA,GACnB,KAAA,SAAS,MAAM,gBAAqB,GAAA,OAAmB,IAAnB,EAAQ,OAAO,EAAY,MAAA,OAAmB,IAAnB,EAAQ,OAAO,EAAnF,KACK,KAAA,SAAS,MAAM,UAAsB,UAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAM,MAAA,OAAA,EAAQ,EAAI,EAAO,MAAA,OAAA,EAAQ,EAAI,EAAjG,KAEA,EAAO,MAAM,SACT,WAAA,OAAA,EAAQ,OACH,IAAI,SAAA,GAAY,MAAA,GAAA,OAAA,EAAM,EAAO,OAAA,OAAA,EAAM,EAA1B,QAFlB,OAiBO,CAAA,IAAA,WAXQ,IAAA,WACR,OAAA,KAAK,WAGI,IAAA,SAAA,GACX,KAAA,UAAY,MAMV,EApDT,GAoDS,EAAA,EAAA,QAAA,QAAA;;ACIf,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,EAlEA,QAAA,SACA,IAAA,EAAA,EAAA,QAAA,oBAEA,EAAA,EAAA,QAAA,2BA+DA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA3DM,SAAU,IACN,IAAA,EAAS,SAAS,cAA2B,YAE7C,EAAU,IAAI,EAAJ,QACD,IAAI,EAAJ,QAAkB,EAAQ","file":"lib.93bfb19a.js","sourceRoot":"..","sourcesContent":["const rootEl = document.createElement(\"div\")\r\nrootEl.style.position = \"fixed\"\r\nrootEl.style.top = \"0\"\r\nrootEl.style.left = \"0\"\r\nrootEl.className = \"dev\"\r\nrootEl.innerHTML = `\r\n<div>\r\n    <strong>Guide</strong>\r\n    <p>\r\n        Use \\`1\\` - \\`3\\` keys to switch between modes. <br> \r\n        Keep in mind once you switch to mode \\`3\\` you cannot switch back. <br>\r\n    </p>\r\n    <p>\r\n        Use mouse wheel while hovering the layer to rotate the image.\r\n    </p>\r\n    <br>\r\n    <strong>State</strong>\r\n</div>\r\n<table>\r\n    <tr>\r\n        <td>FPS</td>\r\n        <td align=\"right\"><span class=\"fps\"/></td>\r\n    </tr>\r\n    <tr>\r\n        <td>MODE</td>\r\n        <td align=\"center\"><span class=\"mode\"/></td>\r\n    </tr>\r\n    <tr>\r\n        <td>ROTATION</td>\r\n        <td align=\"right\"><span class=\"rotation\"/></td>\r\n    </tr>\r\n</table>\r\n`\r\ndocument.body.prepend(rootEl)\r\n\r\nconst fpsEl = rootEl.querySelector(\".fps\")\r\nconst modeEl = rootEl.querySelector(\".mode\")\r\nconst rotationEl = rootEl.querySelector(\".rotation\")\r\nmodeEl.textContent = \"Locked Scaling\"\r\nrotationEl.textContent = \"0.00°\"\r\n\r\nlet previousTick = 0\r\nlet frameCount = 0\r\nfunction frame() {\r\n    const tick = Date.now()\r\n    frameCount++;\r\n    if (tick > previousTick + 1000) {\r\n        let fps = Math.round( ( frameCount * 1000 ) / ( tick - previousTick ) );\r\n        previousTick = tick;\r\n        frameCount = 0;\r\n\r\n        fpsEl.textContent = String(fps)\r\n    }\r\n\r\n    requestAnimationFrame(frame)\r\n\r\n}\r\n\r\nframe()","type Matrix = { a: number, b: number, c: number, d: number, tx: number, ty: number }\r\n\r\n\r\n\r\nexport const identity = (): Matrix =>\r\n    ({ a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 })\r\n\r\n\r\nexport const translate = (mA: Matrix, tx: number, ty: number): Matrix =>\r\n    ({ ...mA, ...{ tx, ty } })\r\n\r\n\r\nexport const rotate = (mA: Matrix, radians: number): Matrix  =>\r\n    ({ ...mA, ...{ a: Math.cos(radians), b: -Math.sin(radians), c: Math.sin(radians), d: Math.cos(radians) } })\r\n\r\n\r\nexport const scale = (mA: Matrix, scalar: number): Matrix =>\r\n    ({ ...mA, ...{ a: mA[0] * scalar, b: mA[1] * scalar, c: mA[2] * scalar, d: mA[3] * scalar } })\r\n\r\n\r\n\r\nconst Matrix = {\r\n    identity,\r\n    translate,\r\n    rotate,\r\n    scale\r\n}\r\n\r\n\r\nexport default Matrix","export type Listener = (event: Event) => void\r\n\r\n\r\nexport enum EventType {\r\n    MOUSE_MOVE = \"mousemove\",\r\n    MOUSE_DOWN = \"mousedown\",\r\n    MOUSE_UP = \"mouseup\"\r\n}\r\n\r\n\r\nclass EventListener {\r\n    private readonly _event: string\r\n    private readonly _listener: Listener\r\n    private readonly _targets = new Set<Element | Document>()\r\n\r\n    constructor(event: string, listener: Listener) {\r\n        this._event = event\r\n        this._listener = listener\r\n    }\r\n\r\n    public subscribe(target: Element | Document): EventListener {\r\n        target.addEventListener(this._event, this._listener)\r\n        this._targets.add(target)\r\n        return this\r\n    }\r\n\r\n    public destroy(): void {\r\n        for (const target of this._targets) {\r\n            target.removeEventListener(this._event, this._listener)\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default EventListener\r\n\r\n\r\n\r\n/*\r\n\r\n    private readonly _handleMoveStart = new EventListener(\"movestart\", (event) => {\r\n\r\n    })\r\n\r\n\r\n    this._handleMoveStart.target(document.body)\r\n\r\n */","import exp = require(\"constants\")\r\n\r\n\r\n\r\ntype Vector = { x: number, y: number }\r\n\r\n\r\nexport const create = (x: number, y: number = x) =>\r\n    ({ x: x, y: y })\r\n\r\n\r\nexport const add = (vA: Vector, vB: Vector): Vector =>\r\n    ({ x: vA.x + vB.x, y: vA.y + vB.y })\r\n\r\n\r\nexport const subtract = (vA: Vector, vB: Vector): Vector =>\r\n    ({ x: vA.x - vB.x, y: vA.y - vB.y })\r\n\r\n\r\nexport const multiply = (vA: Vector, vB: Vector): Vector =>\r\n    ({ x: vA.x * vB.x, y: vA.y * vB.y })\r\n\r\n\r\nexport const divide = (vA: Vector, vB: Vector): Vector =>\r\n    ({ x: vA.x / vB.x, y: vA.y / vB.y })\r\n\r\n\r\nexport const rotate = (vA: Vector, vB: Vector, radian: number): Vector => {\r\n    const run = vB.x - vA.x,\r\n        rise = vB.y - vA.y\r\n    return {\r\n        x: (Math.cos(radian) * run) + (Math.sin(radian) * rise) + vA.x,\r\n        y: (Math.cos(radian) * rise) - (Math.sin(radian) * run) + vA.y\r\n    }\r\n}\r\n\r\n\r\nexport const rotate2 = (vA: Vector, radian: number): Vector => {\r\n    return {\r\n        x: (vA.x * Math.cos(radian)) - (vA.y * Math.sin(radian)),\r\n        y: (vA.x * Math.sin(radian)) + (vA.y * Math.cos(radian))\r\n    }\r\n}\r\n\r\n\r\nexport const dot = (vA: Vector, vB: Vector): number => {\r\n    return vA.x * vB.x + vA.y * vB.y;\r\n}\r\n\r\n\r\nexport const scale = (vA: Vector, scalar: number): Vector =>\r\n    multiply(vA, { x: scalar, y: scalar })\r\n\r\n\r\nexport const normalize = (vA: Vector): Vector => {\r\n    const scalar = 1 / length(vA)\r\n    return scale(vA, scalar === Infinity ? 0 : scalar)\r\n}\r\n\r\n\r\nexport const length = (vA: Vector): number =>\r\n    Math.sqrt(vA.x * vA.x + vA.y * vA.y)\r\n\r\n\r\nexport const distance = (vA: Vector, vB: Vector): number =>\r\n    Math.hypot(vB.x - vA.x, vB.y - vA.y)\r\n\r\n\r\nexport const direction = (vA: Vector): number =>\r\n    -Math.atan2(vA.y, vA.x) - Math.PI\r\n\r\n\r\nexport const ap = (vA: Vector, f: (component: number) => number) =>\r\n    ({ x: f(vA.x), y: f(vA.y) })\r\n\r\n\r\n\r\nconst Vector = {\r\n    create,\r\n    add,\r\n    subtract,\r\n    multiply,\r\n    divide,\r\n    rotate,\r\n    scale,\r\n    length,\r\n    distance,\r\n    direction,\r\n    normalize,\r\n    ap,\r\n    dot\r\n}\r\n\r\n\r\nexport default Vector","import EventListener, { EventType } from \"../Event/EventListener\"\r\nimport Matrix from \"../Math/Matrix\"\r\nimport Vector, { subtract } from \"../Math/Vector\"\r\n\r\n\r\n\r\nexport namespace ShapeEvent {\r\n    export interface MoveEvent extends CustomEvent {\r\n\r\n    }\r\n}\r\n\r\nexport enum ShapeEvent {\r\n    MOVE = \"shape:move\",\r\n    MOVE_START = \"shape:movestart\",\r\n    MOVE_END = \"shape:moveend\",\r\n}\r\n\r\n\r\nabstract class Shape implements Vector {\r\n    public abstract position: Vector\r\n    public abstract x: number\r\n    public abstract y: number\r\n    public abstract a: Vector\r\n    public abstract b: Vector\r\n    public abstract ax: number\r\n    public abstract ay: number\r\n    public abstract bx: number\r\n    public abstract by: number\r\n\r\n    private readonly _element: HTMLElement\r\n    protected _transform = Matrix.identity()\r\n    protected _origin: Vector = { x: 0.5, y: 0.5 }\r\n    protected _scale: Vector = { x: 1, y: 1 }\r\n    protected _direction: number = 0\r\n    private _state = {\r\n        isActive: false,\r\n        isMoving: false,\r\n        payloads: {\r\n            move: {\r\n                shape: this,\r\n                destination: this as Vector,\r\n                offset: { x: 0, y: 0 }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    protected constructor() {\r\n        this._element = document.createElement(\"div\")\r\n        this._element.style.position = \"absolute\"\r\n        this._element.style.zIndex = \"100\"\r\n        this._element.style[\"mix-blend-mode\"] = \"exclusion\"\r\n        this._element.style[\"-webkit-font-smoothing\"] = \"subpixel-antialiased\"\r\n    }\r\n\r\n\r\n    public prepare(canvas: HTMLElement): void {\r\n        canvas.append(this._element)\r\n\r\n        this._handleMouseMove\r\n            .subscribe(document)\r\n        this._handleMouseDown\r\n            .subscribe(this.element)\r\n        this._handleMouseUp\r\n            .subscribe(document)\r\n    }\r\n\r\n    public destroy(): void {\r\n        this._handleMouseMove\r\n            .destroy()\r\n        this._handleMouseDown\r\n            .destroy()\r\n        this._handleMouseUp\r\n            .destroy()\r\n        this._element.remove()\r\n    }\r\n\r\n    public draw(): void {\r\n        const { a, b, c, d, tx, ty } = this._transform\r\n        this.element.style.transformOrigin = `${this.origin.x * 100}% ${this.origin.y * 100}%`\r\n        this.element.style.transform = `matrix(${a}, ${b}, ${c}, ${d}, ${this.x + tx}, ${this.y + ty})`\r\n    }\r\n\r\n\r\n    public get element() {\r\n        return this._element\r\n    }\r\n\r\n    public get dimension() {\r\n        return { x: this.width, y: this.height }\r\n    }\r\n\r\n    public get width() {\r\n        return this._element.offsetWidth\r\n    }\r\n\r\n    public get height() {\r\n        return this._element.offsetHeight\r\n    }\r\n\r\n    public get origin() {\r\n        return this._origin\r\n    }\r\n\r\n    public set origin(value: Vector) {\r\n        this._origin = value\r\n    }\r\n\r\n    public get scale() {\r\n        return this._origin\r\n    }\r\n\r\n    public set scale(value: Vector) {\r\n        this._scale = value\r\n    }\r\n\r\n    public get direction() {\r\n        return this._direction\r\n    }\r\n\r\n    public set direction(value: number) {\r\n        this._direction = value\r\n    }\r\n\r\n\r\n    private _handleMouseMove = new EventListener(EventType.MOUSE_MOVE, (event: MouseEvent) => {\r\n        event.preventDefault()\r\n        if (this._state.isActive) {\r\n            const { move: payload } = this._state.payloads\r\n            payload.shape = this\r\n            payload.destination = {\r\n                x: event.pageX - this.element.parentElement.offsetLeft,\r\n                y: event.pageY - this.element.parentElement.offsetTop\r\n            }\r\n\r\n            if (this._state.isMoving) {\r\n                this.element.dispatchEvent(\r\n                    new CustomEvent(ShapeEvent.MOVE, {\r\n                        bubbles: true,\r\n                        detail: payload\r\n                    })\r\n                )\r\n            } else {\r\n                this._state.payloads.move.offset = subtract(payload.shape, payload.destination)\r\n                this.element.dispatchEvent(\r\n                    new CustomEvent(ShapeEvent.MOVE_START, {\r\n                        bubbles: true,\r\n                        detail: payload\r\n                    })\r\n                )\r\n                this._state.isMoving = true\r\n            }\r\n        }\r\n    })\r\n\r\n    private _handleMouseDown = new EventListener(EventType.MOUSE_DOWN, (event: MouseEvent) => {\r\n        event.preventDefault()\r\n        if (!this._state.isMoving) {\r\n            this.element.classList.add(\"active\")\r\n            this._state.isActive = true\r\n        }\r\n    })\r\n\r\n    private _handleMouseUp = new EventListener(EventType.MOUSE_UP, (event: MouseEvent) => {\r\n        event.preventDefault()\r\n        if (this._state.isMoving) {\r\n            this.element.classList.remove(\"active\")\r\n            this._state.isActive = false\r\n            this._state.isMoving = false\r\n\r\n            const { move: payload } = this._state.payloads\r\n            this.element.dispatchEvent(new CustomEvent(ShapeEvent.MOVE_END, {\r\n                bubbles: true,\r\n                detail: payload\r\n            }))\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport default Shape","import Matrix, { rotate, translate } from \"../Math/Matrix\"\r\nimport Vector from \"../Math/Vector\"\r\nimport Shape  from \"./Shape\"\r\n\r\n\r\n\r\nclass Point extends Shape {\r\n    private _position: Vector\r\n\r\n    constructor(x: number, y: number) {\r\n        super()\r\n        this._position = { x, y }\r\n        this.element.className = \"shape point\"\r\n        this.element.style.cursor = \"pointer\"\r\n    }\r\n\r\n    public prepare(canvas: HTMLElement): void {\r\n        super.prepare(canvas)\r\n    }\r\n\r\n    public destroy(): void {\r\n        super.destroy()\r\n    }\r\n\r\n    public draw(): void {\r\n        this._transform = translate(this._transform, -this.width * this.origin.x, -this.height * this.origin.y)\r\n        this._transform = rotate(this._transform, this.direction)\r\n\r\n        const { a, b, c, d, tx, ty } = this._transform\r\n        this.element.style.transformOrigin = `${this.origin.x * 100}% ${this.origin.y * 100}%`\r\n        this.element.style.transform = `matrix(${a}, ${b}, ${c}, ${d}, ${this.x + tx}, ${this.y + ty})`\r\n    }\r\n\r\n    public get position() {\r\n        return { x: this.x, y: this.y }\r\n    }\r\n\r\n    public set position(value: Vector) {\r\n        this.x = value.x\r\n        this.y = value.y\r\n    }\r\n\r\n    public get x() {\r\n        return this._position.x\r\n    }\r\n\r\n    public set x(value: number) {\r\n        this._position.x = value\r\n    }\r\n\r\n    public get y() {\r\n        return this._position.y\r\n    }\r\n\r\n    public set y(value: number) {\r\n        this._position.y = value\r\n    }\r\n\r\n    public get a() {\r\n        return { x: this.ax, y: this.bx }\r\n    }\r\n\r\n    public get b() {\r\n        return { x: this.bx, y: this.by }\r\n    }\r\n\r\n    public get ax() {\r\n        return this.x - this.width * this.origin.x\r\n    }\r\n\r\n    public get ay() {\r\n        return this.y - this.height * this.origin.y\r\n    }\r\n\r\n    public get bx() {\r\n        return this.x + this.width * (1 - this.origin.x)\r\n    }\r\n\r\n    public get by() {\r\n        return this.y - this.width * (1 - this.origin.y)\r\n    }\r\n}\r\n\r\n\r\nexport default Point","import { throttle } from \"../common\"\r\nimport Shape from \"../Shape/Shape\"\r\n\r\n\r\n\r\nclass RotatableBehaviour {\r\n    private readonly _target: Shape\r\n    private readonly _state = {\r\n        initialized: null,\r\n        active: false,\r\n        cursor: \"\"\r\n    }\r\n\r\n    public static enabled = true\r\n\r\n    constructor(target: Shape) {\r\n        this._target = target\r\n        this._state.initialized = requestAnimationFrame(() => {\r\n            this._target.element.addEventListener(\"mousedown\", this._onmousedown)\r\n            document.addEventListener(\"mouseup\", this._onmouseup)\r\n            document.addEventListener(\"wheel\", this._onscroll)\r\n        })\r\n    }\r\n\r\n    public destroy(): void {\r\n        if (this._state.initialized !== null) {\r\n            cancelAnimationFrame(this._state.initialized)\r\n        } else {\r\n            this._target.element.removeEventListener(\"mousedown\", this._onmousedown)\r\n            document.removeEventListener(\"mouseup\", this._onmouseup)\r\n            document.removeEventListener(\"scroll\", this._onscroll)\r\n        }\r\n    }\r\n\r\n    private readonly _onmousedown = (event: MouseEvent): void => {\r\n        event.preventDefault()\r\n        if (RotatableBehaviour.enabled) {\r\n            this._state.active = true\r\n            this._target.element.classList.add(\"active\")\r\n        }\r\n    }\r\n\r\n    private readonly _onmouseup = (event: MouseEvent): void => {\r\n        event.preventDefault()\r\n        if (RotatableBehaviour.enabled) {\r\n            this._state.active = false\r\n            this._target.element.classList.remove(\"active\")\r\n        }\r\n    }\r\n\r\n    private readonly _onscroll = (event: WheelEvent) => {\r\n        if (RotatableBehaviour.enabled) {\r\n            const speed = 0.025\r\n            this._target.direction += speed * Math.PI * Math.sign(event.deltaY)\r\n            const rotationEl = document.querySelector(\".rotation\")\r\n            rotationEl.textContent = `${(this._target.direction * (180 / Math.PI)).toFixed(2)}°`\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default RotatableBehaviour","import Matrix, { rotate, translate } from \"../Math/Matrix\"\r\nimport Vector, { add, direction, distance, normalize, scale, subtract } from \"../Math/Vector\"\r\nimport Point from \"./Point\"\r\nimport Shape from \"./Shape\"\r\n\r\n\r\n\r\nclass Line extends Shape {\r\n    private readonly _pointA: Point\r\n    private readonly _pointB: Point\r\n\r\n    constructor(pointA: Point, pointB: Point) {\r\n        super()\r\n        this.origin = { x: 0, y: 0.5 }\r\n\r\n        this._pointA = pointA\r\n        this._pointB = pointB\r\n\r\n        const inner = document.createElement(\"div\")\r\n        inner.className = \"shape line\"\r\n        this.element.style.height = \"0\"\r\n        this.element.append(inner)\r\n    }\r\n\r\n    public prepare(canvas: HTMLElement): void {\r\n        super.prepare(canvas)\r\n        this._pointA.prepare(canvas)\r\n        this._pointB.prepare(canvas)\r\n    }\r\n\r\n    public destroy(): void {\r\n        super.destroy()\r\n        this._pointA.destroy()\r\n        this._pointB.destroy()\r\n    }\r\n\r\n    public draw(): void {\r\n        this._pointA.draw()\r\n        this._pointB.draw()\r\n\r\n        this.element.style.width = `${distance(this.a, this.b)}px`\r\n\r\n        this._transform = translate(this._transform, this.origin.x, -this.height * this.origin.y)\r\n        this._transform = rotate(this._transform, this.direction)\r\n        super.draw()\r\n    }\r\n\r\n    public get position() {\r\n        return { x: this.x, y: this.y }\r\n    }\r\n\r\n    public set position(value: Vector) {\r\n        const offset = subtract(this.b, this.a)\r\n        this.a = value\r\n        this.b = add(value, offset)\r\n    }\r\n\r\n    public get x() {\r\n        return this.ax\r\n    }\r\n\r\n    public set x(value: number) {\r\n        this.position = { x: value, y: this.y }\r\n    }\r\n\r\n    public get y() {\r\n        return this.ay\r\n    }\r\n\r\n    public set y(value: number) {\r\n        this.position = { x: this.x, y: value }\r\n    }\r\n\r\n    public get a() {\r\n        return this._pointA.position\r\n    }\r\n\r\n    public set a(value: Vector) {\r\n        this._pointA.position = value\r\n    }\r\n\r\n    public get b() {\r\n        return this._pointB.position\r\n    }\r\n\r\n    public set b(value: Vector) {\r\n        this._pointB.position = value\r\n    }\r\n\r\n    public get ax() {\r\n        return this.a.x\r\n    }\r\n\r\n    public set ax(value: number) {\r\n        this.a.x = value\r\n    }\r\n\r\n    public get bx() {\r\n        return this.b.x\r\n    }\r\n\r\n    public set bx(value: number) {\r\n        this.b.x = value\r\n    }\r\n\r\n    public get ay() {\r\n        return this.a.y\r\n    }\r\n\r\n    public set ay(value: number) {\r\n        this.a.y = value\r\n    }\r\n\r\n    public get by() {\r\n        return this.b.y\r\n    }\r\n\r\n    public set by(value: number) {\r\n        this.b.y = value\r\n    }\r\n\r\n    public get direction() {\r\n        return direction(normalize(subtract(this.a, this.b)))\r\n    }\r\n\r\n    public set direction(value: number) {\r\n        const delta = value - this._direction\r\n        this.b = Vector.rotate(this.b, this.a, delta)\r\n        this._direction = direction(normalize(subtract(this.a, this.b)))\r\n    }\r\n}\r\n\r\n\r\nexport default Line","import RotatableBehaviour from \"../Behaviour/RotatableBehaviour\"\r\nimport Matrix, { translate } from \"../Math/Matrix\"\r\nimport Vector, { distance, divide, rotate, subtract } from \"../Math/Vector\"\r\nimport Line from \"./Line\"\r\nimport Point from \"./Point\"\r\nimport Shape, { ShapeEvent } from \"./Shape\"\r\n\r\n\r\n\r\nclass Polygon extends Shape {\r\n    private readonly _rotatable = new RotatableBehaviour(this)\r\n    private readonly _shapes: Shape[]\r\n    private readonly _points: Point[]\r\n\r\n    constructor(...points: Point[]) {\r\n        super()\r\n        this._points = points\r\n\r\n        this._shapes = []\r\n        for (let i = 0, j = i + 1; i < points.length; i++, j++) {\r\n            if (j < points.length) {\r\n                this._shapes.push(points[i], new Line(points[i], points[j]))\r\n            } else {\r\n                this._shapes.push(points[i], new Line(points[i], points[0]))\r\n            }\r\n        }\r\n\r\n        this.element.className = \"shape polygon\"\r\n        this.element.style.cursor = \"move\"\r\n    }\r\n\r\n    public prepare(canvas: HTMLElement): void {\r\n        super.prepare(canvas)\r\n        for (const shape of this._shapes) {\r\n            shape.prepare(canvas)\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        super.destroy()\r\n        for (const shape of this._shapes) {\r\n            shape.destroy()\r\n        }\r\n    }\r\n\r\n    public draw(): void {\r\n        for (const shape of this._shapes) {\r\n            shape.draw()\r\n        }\r\n\r\n        this.element.style.width = `${this.width}px`\r\n        this.element.style.height = `${this.height}px`\r\n\r\n        this._transform = translate(this._transform, -this.width * this.origin.x, -this.height * this.origin.y)\r\n        super.draw()\r\n    }\r\n\r\n    public get points() {\r\n        return this._points\r\n    }\r\n\r\n    public get width() {\r\n        return this.bx - this.ax\r\n    }\r\n\r\n    public get height() {\r\n        return this.by - this.ay\r\n    }\r\n\r\n    public get innerDimension() {\r\n        return { x: this.innerWidth, y: this.innerHeight }\r\n    }\r\n\r\n    public get innerWidth() {\r\n        return distance(this.a, { x: this.bx, y: this.ay })\r\n    }\r\n\r\n    public get innerHeight() {\r\n        return distance(this.a, { x: this.ax, y: this.by })\r\n    }\r\n\r\n    public get position() {\r\n        const x = this.ax + this.width * this.origin.x,\r\n            y = this.ay + this.height * this.origin.y\r\n        return { x, y }\r\n    }\r\n\r\n    public set position(value: Vector) {\r\n        const position = this.position\r\n        for (const point of this._points) {\r\n            const delta = subtract(point.position, position)\r\n            if (point.x === position.x) {\r\n                point.x = value.x\r\n            } else if (point.x < position.x) {\r\n                point.x = value.x + delta.x\r\n            } else if (point.x > position.x) {\r\n                point.x = value.x + delta.x\r\n            }\r\n\r\n            if (point.y === position.y) {\r\n                point.y = value.y\r\n            } else if (point.y < position.y) {\r\n                point.y = value.y + delta.y\r\n            } else if (point.y > position.y) {\r\n                point.y = value.y + delta.y\r\n            }\r\n        }\r\n    }\r\n\r\n    public get x() {\r\n        return this.position.x\r\n    }\r\n\r\n    public set x(value: number) {\r\n        this.position = { x: value, y: this.y }\r\n    }\r\n\r\n    public get y() {\r\n        return this.position.y\r\n    }\r\n\r\n    public set y(value: number) {\r\n        this.position = { x: this.x, y: value }\r\n    }\r\n\r\n    public get a() {\r\n        return { x: this.ax, y: this.ay }\r\n    }\r\n\r\n    public get b() {\r\n        return { x: this.bx, y: this.by }\r\n    }\r\n\r\n    public get ax() {\r\n        return Math.min(...this._points.map(point => point.x))\r\n    }\r\n\r\n    public get ay() {\r\n        return Math.min(...this._points.map(point => point.y))\r\n    }\r\n\r\n    public get bx() {\r\n        return Math.max(...this._points.map(point => point.x))\r\n    }\r\n\r\n    public get by() {\r\n        return Math.max(...this._points.map(shape => shape.y))\r\n    }\r\n\r\n    public get scale() {\r\n        return this._scale\r\n    }\r\n\r\n    public set scale(value: Vector) {\r\n        const delta = divide(value, this._scale)\r\n\r\n        const previousOrigin = this.origin\r\n        const previousDirection = this._direction\r\n\r\n        this.origin = { x: 0.5, y: 0.5 }\r\n        this.direction = 0\r\n        this.origin = previousOrigin\r\n        const w = this.width * 0.5\r\n        const h = this.height * 0.5\r\n\r\n        const { x, y } = this.position\r\n        for (const point of this._points) {\r\n            point.x = ((delta.x) * (point.x - x)) + x\r\n            point.y = ((delta.y) * (point.y - y)) + y\r\n        }\r\n\r\n        this.origin = { x: Math.abs(previousOrigin.x - (w / this.width)), y: Math.abs((h / this.height) - previousOrigin.y) }\r\n        this.direction = previousDirection\r\n        this.origin = previousOrigin\r\n\r\n        this._scale = value\r\n    }\r\n\r\n    public get direction() {\r\n        return super.direction\r\n    }\r\n\r\n    public set direction(value: number) {\r\n        if (Math.abs(value) >= 2 * Math.PI) {\r\n            value = 0\r\n        }\r\n\r\n        const delta = value - super.direction\r\n        const position = this.position\r\n        for (const point of this._points) {\r\n            point.position = rotate(position, point, delta)\r\n            point.direction = value\r\n        }\r\n\r\n        super.direction = value\r\n    }\r\n}\r\n\r\n\r\nexport default Polygon","import EventListener from \"../Core/Event/EventListener\"\r\nimport Vector, { add, ap, distance, divide, scale, subtract } from \"../Core/Math/Vector\"\r\nimport Point from \"../Core/Shape/Point\"\r\nimport Polygon from \"../Core/Shape/Polygon\"\r\nimport { ShapeEvent } from \"../Core/Shape/Shape\"\r\n\r\n\r\n\r\ntype State = {\r\n    initialPolygonOrigin: Vector,\r\n    initialPolygonOriginOffset: Vector,\r\n    initialPolygonScale: Vector\r\n    initialActivePoint: Vector,\r\n    initialFarthestPoint: Vector,\r\n}\r\n\r\n\r\nclass FreePolygonStrategy {\r\n    private readonly _canvas: HTMLElement\r\n    private readonly _polygon: Polygon\r\n    private readonly _points: Record<keyof { a; b; c; d }, Point>\r\n\r\n    constructor(canvas: HTMLElement, polygon: Polygon, points: Record<keyof { a, b, c, d }, Point>) {\r\n        this._canvas = canvas\r\n        this._polygon = polygon\r\n        this._points = points\r\n\r\n        this._handleMove\r\n            .subscribe(this._polygon.element)\r\n        for (const point of this._polygon.points) {\r\n            this._handleResize\r\n                .subscribe(point.element)\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        this._handleMove\r\n            .destroy()\r\n        this._handleResize\r\n            .destroy()\r\n    }\r\n\r\n    private readonly _handleMove = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape, destination, offset } = event.detail\r\n        shape.position = add(destination, offset)\r\n    })\r\n\r\n    private readonly _handleResize = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape, destination } = event.detail\r\n        console.log(shape)\r\n        shape.position = destination\r\n    })\r\n}\r\n\r\n\r\n\r\nexport default FreePolygonStrategy","import EventListener from \"../Core/Event/EventListener\"\r\nimport Vector, { add, ap, distance, divide, scale, subtract } from \"../Core/Math/Vector\"\r\nimport Point from \"../Core/Shape/Point\"\r\nimport Polygon from \"../Core/Shape/Polygon\"\r\nimport { ShapeEvent } from \"../Core/Shape/Shape\"\r\n\r\n\r\n\r\ntype State = {\r\n    initialPolygonOrigin: Vector,\r\n    initialPolygonOriginOffset: Vector,\r\n    initialPolygonScale: Vector\r\n    initialActivePoint: Vector,\r\n    initialFarthestPoint: Vector,\r\n}\r\n\r\n\r\nclass LockedScalingStrategy {\r\n    private readonly _canvas: HTMLElement\r\n    private readonly _polygon: Polygon\r\n    private readonly _points: Record<keyof { a; b; c; d }, Point>\r\n    private _state?: State\r\n\r\n    constructor(canvas: HTMLElement, polygon: Polygon, points: Record<keyof { a, b, c, d }, Point>) {\r\n        this._canvas = canvas\r\n        this._polygon = polygon\r\n        this._points = points\r\n\r\n        this._handleMove\r\n            .subscribe(this._polygon.element)\r\n        for (const point of this._polygon.points) {\r\n            this._handleResize\r\n                .subscribe(point.element)\r\n            this._handleResizeStart\r\n                .subscribe(point.element)\r\n            this._handleResizeEnd\r\n                .subscribe(point.element)\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        this._handleMove\r\n            .destroy()\r\n        this._handleResize\r\n            .destroy()\r\n        this._handleResizeStart\r\n            .destroy()\r\n        this._handleResizeEnd\r\n            .destroy()\r\n    }\r\n\r\n    private readonly _handleMove = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape, destination, offset } = event.detail\r\n        shape.position = add(destination, offset)\r\n    })\r\n\r\n    private readonly _handleResize = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        if (this._state === undefined) {\r\n            return\r\n        }\r\n\r\n        const {\r\n            initialPolygonOrigin, initialPolygonOriginOffset, initialPolygonScale,\r\n            initialActivePoint, initialFarthestPoint\r\n        } = this._state\r\n        const { destination } = event.detail\r\n        const longer = distance(destination, initialFarthestPoint),\r\n            shorter = distance(initialActivePoint, initialFarthestPoint)\r\n        const delta = scale(initialPolygonScale, longer / shorter - 1)\r\n        this._polygon.origin = initialPolygonOriginOffset\r\n        this._polygon.scale = add(delta, initialPolygonScale)\r\n        this._polygon.origin = initialPolygonOrigin\r\n    })\r\n\r\n    private readonly _handleResizeStart = new EventListener(ShapeEvent.MOVE_START, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape } = event.detail\r\n        this._state = {\r\n            initialPolygonOrigin: this._polygon.origin,\r\n            initialPolygonOriginOffset: ap(divide(subtract(shape, this._polygon.a), this._polygon.dimension), x => -~-Math.round(x)),\r\n            initialPolygonScale: this._polygon.scale,\r\n            initialActivePoint: shape.position,\r\n            initialFarthestPoint: this._polygon.points\r\n                .reduce(\r\n                    (farthest, next) =>\r\n                        distance(shape, next) > distance(shape, farthest) ?\r\n                            next : farthest\r\n                ).position\r\n        }\r\n    })\r\n\r\n    private readonly _handleResizeEnd = new EventListener(ShapeEvent.MOVE_END, (event: ShapeEvent.MoveEvent) => {\r\n        this._polygon.origin = this._state.initialPolygonOrigin\r\n        delete this._state\r\n    })\r\n}\r\n\r\n\r\n\r\nexport default LockedScalingStrategy","import EventListener from \"../Core/Event/EventListener\"\r\nimport Vector, { add, ap, distance, divide, dot, multiply, normalize, rotate, scale, subtract, length } from \"../Core/Math/Vector\"\r\nimport Point from \"../Core/Shape/Point\"\r\nimport Polygon from \"../Core/Shape/Polygon\"\r\nimport { ShapeEvent } from \"../Core/Shape/Shape\"\r\n\r\n\r\n\r\ntype State = {\r\n    initialHorizontalPoint: Vector,\r\n    initialVerticalPoint: Vector,\r\n    initialPolygonOrigin: Vector,\r\n    initialPolygonOriginOffset: Vector,\r\n    initialPolygonScale: Vector\r\n    initialActivePoint: Vector,\r\n    initialFarthestPoint: Vector,\r\n}\r\n\r\n\r\nclass UnlockedScalingStrategy {\r\n    private readonly _canvas: HTMLElement\r\n    private readonly _polygon: Polygon\r\n    private readonly _points: Record<keyof { a, ab, b, bc, c, cd, d, da }, Point>\r\n    private _state?: State\r\n    private _i: HTMLElement\r\n    private _j: HTMLElement\r\n\r\n    constructor(canvas: HTMLElement, polygon: Polygon, points: Record<keyof { a, ab, b, bc, c, cd, d, da }, Point>) {\r\n        this._canvas = canvas\r\n        this._polygon = polygon\r\n        this._points = points\r\n\r\n        this._handleMove\r\n            .subscribe(this._polygon.element)\r\n        for (const point of this._polygon.points) {\r\n            this._handleResize\r\n                .subscribe(point.element)\r\n            this._handleResizeStart\r\n                .subscribe(point.element)\r\n            this._handleResizeEnd\r\n                .subscribe(point.element)\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        this._handleMove\r\n            .destroy()\r\n        this._handleResize\r\n            .destroy()\r\n        this._handleResizeStart\r\n            .destroy()\r\n        this._handleResizeEnd\r\n            .destroy()\r\n    }\r\n\r\n    private readonly _handleMove = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape, destination, offset } = event.detail\r\n        shape.position = add(destination, offset)\r\n    })\r\n\r\n    private readonly _handleResize = new EventListener(ShapeEvent.MOVE, (event: ShapeEvent.MoveEvent) => {\r\n        if (this._state === undefined) {\r\n            return\r\n        }\r\n\r\n        const {\r\n            initialPolygonOrigin, initialPolygonOriginOffset, initialPolygonScale,\r\n            initialActivePoint: K, initialFarthestPoint, initialHorizontalPoint: H, initialVerticalPoint: V\r\n        } = this._state\r\n        const { shape, destination: M } = event.detail\r\n        const { abs, atan2, cos, acos, PI: π } = Math\r\n\r\n\r\n        const ma = subtract(M, K),\r\n            ab = subtract(H, K),\r\n            ad = subtract(V, K)\r\n        const α = acos(dot(normalize(ma), normalize(ab)))\r\n        const β = acos(dot(normalize(ma), normalize(ad)))\r\n\r\n        this._polygon.origin = initialPolygonOriginOffset\r\n\r\n        const delta = multiply(initialPolygonScale, {\r\n            x: ((-cos(α) * length(ma) + length(ab)) / length(ab)) - 1,\r\n            y: ((-cos(β) * length(ma) + length(ad)) / length(ad)) - 1\r\n        })\r\n\r\n        if (delta.x === -Infinity) {\r\n            delta.x = 0\r\n        }\r\n\r\n        if (delta.y === -Infinity) {\r\n            delta.y = 0\r\n        }\r\n\r\n        this._polygon.scale = add(initialPolygonScale, delta)\r\n        this._polygon.origin = initialPolygonOrigin\r\n    })\r\n\r\n    private readonly _handleResizeStart = new EventListener(ShapeEvent.MOVE_START, (event: ShapeEvent.MoveEvent) => {\r\n        const { shape } = event.detail\r\n\r\n        const previousPolygonDirection = this._polygon.direction\r\n        this._polygon.direction = 0\r\n        const origin = ap(divide(subtract(shape, this._polygon.a), this._polygon.dimension), x => -~-Math.round(x))\r\n        this._polygon.direction = previousPolygonDirection\r\n\r\n        const { a: A, ab: AB, b: B, bc: BC, c: C, cd: CD, d: D, da: DA } = this._points\r\n        let H, V\r\n         switch (shape) {\r\n            case A:\r\n                H = B\r\n                V = D\r\n                break\r\n            case AB:\r\n                H = AB\r\n                V = CD\r\n                break\r\n            case B:\r\n                H = A\r\n                V = C\r\n                break\r\n            case BC:\r\n                H = DA\r\n                V = BC\r\n                break\r\n            case C:\r\n                H = D\r\n                V = B\r\n                break\r\n            case CD:\r\n                H = CD\r\n                V = AB\r\n                break\r\n            case D:\r\n                H = C\r\n                V = A\r\n                break\r\n            case DA:\r\n                H = BC\r\n                V = DA\r\n                break\r\n            default:\r\n                throw new Error()\r\n        }\r\n\r\n        this._state = {\r\n            initialHorizontalPoint: H.position,\r\n            initialVerticalPoint: V.position,\r\n            initialPolygonOrigin: this._polygon.origin,\r\n            initialPolygonOriginOffset: origin,\r\n            initialPolygonScale: this._polygon.scale,\r\n            initialActivePoint: shape.position,\r\n            initialFarthestPoint: this._polygon.points\r\n                .reduce(\r\n                    (farthest, next) =>\r\n                        distance(shape, next) > distance(shape, farthest) ?\r\n                            next : farthest\r\n                ).position\r\n        }\r\n    })\r\n\r\n    private readonly _handleResizeEnd = new EventListener(ShapeEvent.MOVE_END, (event: ShapeEvent.MoveEvent) => {\r\n        // this._polygon.origin = this._state.initialPolygonOrigin\r\n        delete this._state\r\n    })\r\n}\r\n\r\n\r\n\r\nexport default UnlockedScalingStrategy","import RotatableBehaviour from \"./Core/Behaviour/RotatableBehaviour\"\r\nimport Vector from \"./Core/Math/Vector\"\r\nimport Point from \"./Core/Shape/Point\"\r\nimport Polygon from \"./Core/Shape/Polygon\"\r\nimport FreePolygonStrategy from \"./Strategy/FreePolygonStrategy\"\r\nimport LockedScalingStrategy from \"./Strategy/LockedScalingStrategy\"\r\nimport UnlockedScalingStrategy from \"./Strategy/UnlockedScalingStrategy\"\r\nimport ImageSubject from \"./Subject/ImageSubject\"\r\n\r\n\r\n\r\nclass OverlayEditor {\r\n    private readonly _subject: ImageSubject\r\n    private readonly _polygon: Polygon\r\n    private readonly _points: Record<keyof { a, ab, b, bc, c, cd, d, da }, Point>\r\n\r\n    constructor(canvas: HTMLElement, subject: ImageSubject) {\r\n        this._subject = subject\r\n        const a = new Point(0, 0),\r\n            ab = new Point(160, 0),\r\n            b = new Point(320, 0),\r\n            bc = new Point(320, 120),\r\n            c = new Point(320, 240),\r\n            cd = new Point(160, 240),\r\n            d = new Point(0, 240),\r\n            da = new Point(0, 120)\r\n        this._polygon = new Polygon(a, ab, b, bc, c, cd, d, da)\r\n        this._points = { a, ab, b, bc, c, cd, d, da }\r\n\r\n        this._subject.strategy = new LockedScalingStrategy(canvas, this._polygon, this._points)\r\n        const modeEl: HTMLElement = document.querySelector(\".mode\")\r\n        let debunked = false\r\n        window.addEventListener(\"keypress\", (event) => {\r\n            const { key } = event\r\n            if (!debunked) {\r\n                switch (key) {\r\n                    case \"1\":\r\n                        subject.strategy.destroy()\r\n                        subject.strategy = new LockedScalingStrategy(canvas, this._polygon, this._points)\r\n                        modeEl.textContent = \"Locked Scaling\"\r\n                        break\r\n                    case \"2\":\r\n                        subject.strategy.destroy()\r\n                        subject.strategy = new UnlockedScalingStrategy(canvas, this._polygon, this._points)\r\n                        modeEl.textContent = \"Unlocked Scaling\"\r\n                        break\r\n                    case \"3\":\r\n                        // RotatableBehaviour.enabled = false\r\n                        debunked = true\r\n                        subject.strategy.destroy()\r\n                        subject.strategy = new FreePolygonStrategy(canvas, this._polygon, this._points)\r\n                        modeEl.textContent = \"Polygon (LOCKED)\"\r\n                        modeEl.style.color = \"lightcoral\"\r\n                        modeEl.style.fontWeight = \"bold\"\r\n                        break\r\n                }\r\n            }\r\n        })\r\n\r\n        const projection = document.createElement(\"div\")\r\n        projection.className = \"preview projection\"\r\n        projection.style.position = \"relative\"\r\n        projection.style.width = \"100%\"\r\n        projection.style.height = \"100%\"\r\n        projection.style.overflow = \"hidden\"\r\n\r\n        // this._polygon.origin = {  x: 1, y: 1 }\r\n        let n = 1\r\n        const tick = () => {\r\n            this._polygon.draw()\r\n            this._subject.draw(projection, this._polygon, this._points)\r\n            // this._polygon.scale = { x: n, y: 1 }\r\n            if (n < 2) {\r\n                n += 0.0025\r\n            }\r\n            requestAnimationFrame(tick)\r\n        }\r\n\r\n        this._polygon.prepare(canvas)\r\n        this._subject.prepare(projection, this._polygon, this._points)\r\n        requestAnimationFrame(tick)\r\n\r\n        canvas.append(projection)\r\n    }\r\n\r\n    public destroy(): void {\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default OverlayEditor","import Matrix, { rotate, translate } from \"../Core/Math/Matrix\"\r\nimport { distance } from \"../Core/Math/Vector\"\r\nimport Point from \"../Core/Shape/Point\"\r\nimport Polygon from \"../Core/Shape/Polygon\"\r\nimport FreePolygonStrategy from \"../Strategy/FreePolygonStrategy\"\r\nimport LockedScalingStrategy from \"../Strategy/LockedScalingStrategy\"\r\nimport UnlockedScalingStrategy from \"../Strategy/UnlockedScalingStrategy\"\r\n\r\n\r\n\r\nclass ImageSubject {\r\n    private readonly _element: HTMLElement\r\n    private _transform: Matrix = Matrix.identity()\r\n    private _strategy?: LockedScalingStrategy | UnlockedScalingStrategy | FreePolygonStrategy\r\n\r\n    constructor() {\r\n        this._element = document.createElement(\"div\")\r\n        this._element.className = \"subject image\"\r\n        this._element.style.position = \"absolute\"\r\n        this._element.style.pointerEvents = \"none\"\r\n        this._element.style.backgroundImage = \"url(\\\"https://media.giphy.com/media/koUtwnvA3TY7C/giphy.gif\\\")\"\r\n        this._element.style.backgroundSize = `calc(100% - 6px) calc(100% - 6px)`\r\n        this._element.style.backgroundRepeat = `no-repeat`\r\n        this._element.style.backgroundPosition = `center`\r\n    }\r\n\r\n    public prepare(canvas: HTMLElement, polygon: Polygon, points: Record<keyof { a, b, c, d }, Point>) {\r\n        canvas.append(this._element)\r\n        // this._strategy.prepare(canvas, polygon, points)\r\n    }\r\n\r\n    public draw(canvas: HTMLElement, polygon: Polygon, points: Record<keyof { a, b, c, d }, Point>): void {\r\n        const width = distance(points.a, points.b),\r\n            height = distance(points.a, points.d)\r\n\r\n        this._element.style.width = `${width}px`\r\n        this._element.style.height = `${height}px`\r\n\r\n        this._transform = translate(this._transform, -width * polygon.origin.x, -height * polygon.origin.y)\r\n        this._transform = rotate(this._transform, polygon.direction)\r\n\r\n        const { a, b, c, d, tx, ty } = this._transform\r\n        this._element.style.transformOrigin = `${polygon.origin.x * 100}% ${polygon.origin.y * 100}%`\r\n        this._element.style.transform = `matrix(${a}, ${b}, ${c}, ${d}, ${polygon.x + tx}, ${polygon.y + ty})`\r\n\r\n        canvas.style.clipPath = `polygon(${\r\n            polygon.points\r\n                .map(point => `${point.x}px ${point.y}px`)\r\n        })`\r\n    }\r\n\r\n    public get strategy() {\r\n        return this._strategy\r\n    }\r\n\r\n    public set strategy(value: LockedScalingStrategy | UnlockedScalingStrategy | FreePolygonStrategy) {\r\n        this._strategy = value\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ImageSubject","import \"./dev\"\r\nimport OverlayEditor from \"./OverlayEditor\"\r\nimport LockedScalingStrategy from \"./Strategy/LockedScalingStrategy\"\r\nimport ImageSubject from \"./Subject/ImageSubject\"\r\n\r\n\r\n\r\nexport function main() {\r\n    const canvas = document.querySelector<HTMLElement>(\".preview\")\r\n\r\n    const subject = new ImageSubject()\r\n    const editor = new OverlayEditor(canvas, subject)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const canvas = document.querySelector<HTMLElement>(\".preview\")\r\n// const pointA = new Point(0, 0)\r\n// const pointAB = new Point(160, 0)\r\n// const pointB = new Point(320, 0)\r\n// const pointBC = new Point(320, 120)\r\n// const pointC = new Point(320, 240)\r\n// const pointCD = new Point(160, 240)\r\n// const pointD = new Point(0, 240)\r\n// const pointDA = new Point(0, 120)\r\n// const polygon = new Polygon(pointA, pointAB, pointB, pointBC, pointC, pointCD, pointD, pointDA)\r\n// const line = new Line(pointA, pointC)\r\n//\r\n// // canvas.append(pointA.element)\r\n// // canvas.append(pointB.element)\r\n// // canvas.append(pointC.element)\r\n// // canvas.append(pointD.element)\r\n// // canvas.append(polygon.element)\r\n// // canvas.append(line.element)\r\n// // line.prepare(canvas)\r\n// polygon.prepare(canvas)\r\n// polygon.position = { x: 250, y: 250 }\r\n// // line.direction = 1.5 * Math.PI\r\n//\r\n// function tick() {\r\n//     // line.position = { x: 150, y: 150 }\r\n//     // line.x += 1\r\n//     // line.y += 1\r\n//     // line.direction += 0.0015 * Math.PI\r\n//     // pointA.direction += 0.0025 * Math.PI\r\n//     // pointC.direction -= 0.0025 * Math.PI\r\n//     // pointA.x = pointA.x + 2\r\n//     // pointA.y = pointA.y + 1\r\n//     // pointB.x = pointB.x + 1\r\n//     // pointB.y = pointB.y + 2\r\n//     // point.y = point.y + 3\r\n//\r\n//     // line.draw()\r\n//     polygon.draw()\r\n//     // polygon.x += .25\r\n//     // polygon.y += .25\r\n//     // polygon.direction += Math.PI * 0.01\r\n//     // console.log(polygon.direction)\r\n//     requestAnimationFrame(tick)\r\n// }\r\n//\r\n// tick()"]}